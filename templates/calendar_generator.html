{% extends "base.html" %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Georgia Parenting Time Calculator</title>
    <style>
h3,h4,p{margin-top: 10px;margin-bottom:1px}
.summer-schedule-options {
  display: flex;
  flex-wrap: wrap;
}
td{min-width:35px;}
.date-picker {
  margin-top: 1px;
}
.date-picker.exchange, .parent-selection-FirstSplit {
    display: none;
}
.parent-selection {
  margin-bottom: 1px;
}
        .options-container, .option-section, .two-column > div {
            border: 1px solid #ccc;
            padding: 5px;
            margin-bottom: 1px;
        }
        .two-column {
            display: block;  /* Changed from flex to block */
        }
        .two-column > div {
            width: 100%;     /* Changed from 48% to 100% */
            margin-bottom: 20px; /* Added spacing between the divs */
        }

        /* Add media query for larger screens if you want it to show side by side above certain width */
        @media screen and (min-width: 1024px) {
            .two-column {
                display: flex;
                justify-content: space-between;
            }
            .two-column > div {
                width: 48%;
            }
        }
       .calendar-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}
.month {
    width: 32%;
    margin-bottom: 20px;
}
        .month table {
            width: 100%;
            border-collapse: collapse;
        }
        .month th, .month td {
            border: 1px solid #ddd;
            padding: 2px;
            text-align: center;
            font-size: 12px;
        }
        .month input[type="number"] {
            width: 30px;
            font-size: 10px;
        }
    #ParentBpct,#total-days,#average-days {
        margin-left: 10px;
        width: 60px;
    }
    @media print {
        #calendar {
            page-break-before: always;
        }
        
        /* Stack two-column layouts vertically when printing */
        .two-column {
            display: block !important;
        }
        .two-column > div {
            width: 100% !important;
            display: block !important;
            margin-bottom: 15px !important;
        }
        .document-analyzer {
            display: none;
        }
        
        /* Reduce notes font size by 2 points */
        .notes-section p {
            font-size: 10px !important;
        }
        
        /* Force background colors to print */
        td {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
            color-adjust: exact !important;
        }
        
        /* 3 months per page, stacked vertically, full width */
        .calendar-container {
            display: block !important;
        }
        .calendar-row {
            display: block !important;
        }
        
        /* Page break between Holiday Schedule sections */
        #holiday-even {
            page-break-after: always !important;
            break-after: page !important;
        }
        .month {
            width: 100% !important;
            margin-bottom: 5px !important;
            display: block !important;
            float: none !important;
        }
        .month table {
            width: 100% !important;
            font-size: 9px;
        }
        .month th, .month td {
            padding: 2px !important;
            font-size: 9px !important;
            line-height: 1.1 !important;
        }
        .month td {
            text-align: left !important;
            vertical-align: top !important;
        }
        .month-header {
            font-size: 11px !important;
            font-weight: bold;
            margin-bottom: 2px;
            text-align: center;
        }
        .month-total {
            margin-top: 2px !important;
            padding: 2px !important;
            font-size: 8px !important;
        }
        
        /* Hide input on print, show print value span */
        .month input[type="number"] {
            display: none !important;
        }
        .print-value {
            display: block !important;
            font-size: 9px;
            font-weight: bold;
            text-align: center;
        }
        
        /* Show monthly totals only when printing */
        .month-total {
            display: block !important;
            font-size: 10px;
            font-weight: bold;
            text-align: center;
            margin-top: 5px;
            padding: 5px;
            background: #f0f0f0;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
        }
    }
    
    /* Hide print value span on screen */
    .print-value {
        display: none;
    }
    /* Hide month total on screen */
    .month-total {
        display: none;
    }
    /* Calendar row layout for screen */
    .calendar-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }
    .document-analyzer {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        color: white;
    }
    .document-analyzer h2 {
        margin-top: 0;
        color: white;
    }
    .document-analyzer p {
        color: rgba(255,255,255,0.9);
    }
    .upload-area {
        background: rgba(255,255,255,0.15);
        border: 2px dashed rgba(255,255,255,0.5);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        margin: 15px 0;
        transition: all 0.3s ease;
    }
    .upload-area:hover {
        background: rgba(255,255,255,0.25);
        border-color: rgba(255,255,255,0.8);
    }
    .upload-area input[type="file"] {
        display: none;
    }
    .upload-area label {
        cursor: pointer;
        display: block;
        padding: 10px;
    }
    .upload-btn {
        background: white;
        color: #667eea;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        margin: 10px 5px;
        transition: all 0.3s ease;
    }
    .upload-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .upload-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
    }
    .analysis-results {
        background: rgba(255,255,255,0.95);
        color: #000;
        border-radius: 8px;
        padding: 20px;
        margin-top: 15px;
        display: none;
    }
    .analysis-results h3,
    .analysis-results h4,
    .analysis-results p,
    .analysis-results span,
    .analysis-results div {
        color: #000;
    }
    .confidence-high { color: #27ae60; font-weight: bold; }
    .confidence-medium { color: #f39c12; font-weight: bold; }
    .confidence-low { color: #e74c3c; font-weight: bold; }
    .warning-banner {
        background: #fff3cd;
        border: 1px solid #ffc107;
        border-radius: 6px;
        padding: 10px;
        margin: 10px 0;
        color: #856404;
    }
    .parties-info {
        display: flex;
        gap: 20px;
        margin: 10px 0;
        flex-wrap: wrap;
    }
    .party-box {
        background: #f8f9fa;
        border-radius: 6px;
        padding: 10px 15px;
        flex: 1;
        min-width: 150px;
    }
    .warnings-list {
        background: #fff5f5;
        border: 1px solid #e74c3c;
        border-radius: 6px;
        padding: 10px;
        margin: 10px 0;
    }
    .warnings-list ul {
        margin: 5px 0;
        padding-left: 20px;
    }
    .reasoning-section {
        margin-top: 15px;
    }
    .reasoning-toggle {
        background: #667eea;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
    }
    .reasoning-content {
        display: none;
        background: #f8f9fa;
        border-radius: 6px;
        padding: 15px;
        margin-top: 10px;
        max-height: 300px;
        overflow-y: auto;
        font-size: 12px;
    }
    .reasoning-content.show {
        display: block;
    }
    .spinner {
        display: none;
        text-align: center;
        padding: 20px;
    }
    .spinner-icon {
        border: 4px solid rgba(255,255,255,0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 10px;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .file-name {
        margin-top: 10px;
        font-size: 14px;
        color: rgba(255,255,255,0.8);
    }
    .audit-report-container {
        background: rgba(255,255,255,0.95);
        color: #000;
        border-radius: 8px;
        padding: 20px;
        margin-top: 15px;
    }
    .audit-report-header {
        border-bottom: 2px solid #667eea;
        padding-bottom: 15px;
        margin-bottom: 20px;
    }
    .audit-report-header h3 {
        color: #333;
        margin: 0 0 10px 0;
    }
    .disclaimer {
        font-size: 12px;
        color: #666;
        font-style: italic;
    }
    .audit-actions {
        margin-top: 10px;
    }
    .audit-section {
        margin-bottom: 25px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    .audit-section h4 {
        color: #333;
        margin: 0 0 15px 0;
        border-bottom: 1px solid #ddd;
        padding-bottom: 10px;
    }
    .executive-summary {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    }
    .quality-badge {
        display: inline-block;
        padding: 8px 16px;
        border-radius: 20px;
        color: white;
        font-weight: bold;
        margin-bottom: 15px;
    }
    .quality-strong { background: #28a745; }
    .quality-adequate { background: #17a2b8; }
    .quality-needs-improvement { background: #ffc107; color: #333; }
    .quality-significant-issues { background: #dc3545; }
    .quality-unknown { background: #6c757d; }
    .summary-stats {
        display: flex;
        gap: 15px;
        margin: 15px 0;
        flex-wrap: wrap;
    }
    .stat-box {
        background: white;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        min-width: 120px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .stat-box strong {
        font-size: 24px;
        display: block;
        color: #333;
    }
    .critical-stat strong {
        color: #dc3545;
    }
    .top-priorities {
        background: white;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
    }
    .top-priorities ol {
        margin: 10px 0 0 0;
        padding-left: 20px;
    }
    .overall-assessment {
        margin-top: 15px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        font-style: italic;
    }
    .finding {
        background: white;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 6px;
        border-left: 4px solid #6c757d;
        color: #000;
    }
    .finding.severity-critical { border-left-color: #dc3545; }
    .finding.severity-high { border-left-color: #dc3545; }
    .finding.severity-moderate { border-left-color: #ffc107; }
    .finding.severity-medium { border-left-color: #ffc107; }
    .finding.severity-minor { border-left-color: #17a2b8; }
    .finding.severity-low { border-left-color: #17a2b8; }
    .finding-header {
        margin-bottom: 10px;
    }
    .finding-id {
        background: #667eea;
        color: white;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
    }
    .finding-category {
        background: #e9ecef;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 12px;
        margin-left: 5px;
    }
    .severity-label {
        background: #dc3545;
        color: white;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 11px;
        margin-left: 5px;
    }
    .finding blockquote {
        background: #f1f3f4;
        border-left: 3px solid #667eea;
        margin: 10px 0;
        padding: 10px 15px;
        font-style: italic;
        color: #555;
    }
    .suggestion-box {
        background: #e8f5e9;
        border: 1px solid #4caf50;
        border-radius: 6px;
        padding: 12px;
        margin-top: 10px;
        position: relative;
    }
    .suggestion-box pre {
        white-space: pre-wrap;
        word-wrap: break-word;
        margin: 10px 0 0 0;
        font-size: 13px;
    }
    .copy-btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 4px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        margin-top: 8px;
    }
    .copy-btn:hover {
        background: #5a6fd6;
    }
    @media print {
        .audit-actions, .copy-btn {
            display: none;
        }
        .finding {
            page-break-inside: avoid;
        }
        .audit-section {
            page-break-before: auto;
        }
        body.print-audit-only .audit-report-container {
            display: block !important;
        }
        body.print-audit-only > *:not(.document-analyzer) {
            display: none !important;
        }
        body.print-audit-only .document-analyzer > *:not(.audit-report-container) {
            display: none !important;
        }
        body.print-main .audit-report-container,
        body.print-main .document-analyzer {
            display: none !important;
        }
    }
    </style>
</head>
    <title>Georgia Parenting Time Calendar Tool - "The Taylor Tool")</title>
    <h1>Georgia Parenting Time Calendar Tool<sub> beta</sub></h1>
    <h2>Watch the video at <a href="https://csc.georgiacourts.gov/">https://csc.georgiacourts.gov/</a> for Child Support Commission guidance.
    <h3>Based upon OCGA ยง 19-6-15(b)(5.1)(non-binding until January 1, 2026)</h3>
    <h4>{{ current_user.custom_h4 or "Developed by Russell Taylor, Divorce Attorney in Lawrenceville, GA for Daniels & Taylor, P.C. in Gwinnett County, GA. <a href=\"https://www.danielstaylor.com\">www.danielstaylor.com</a><br>Please send all feature requests, feedback, and bug-reports to <a href=\"mailto:parentingtimepro@gmail.com\">parentingtimepro@gmail.com</a>" | safe }}</h4>

    <div class="document-analyzer">
        <h2>Document Analyzer (Optional)</h2>
        <p>Upload your parenting plan PDF to automatically fill in the form below. Supports both scanned documents and native PDFs.</p>
        
        <div class="upload-area" id="dropZone">
            <input type="file" id="pdfFile" accept=".pdf">
            <label for="pdfFile">
                <strong>Click to select a PDF file</strong><br>
                <small>or drag and drop here (max 10MB)</small>
            </label>
            <div class="file-name" id="fileName"></div>
        </div>
        
        <div>
            <button type="button" class="upload-btn" id="analyzeBtn" disabled>AUTO Analyze Plan!</button>
            <button type="button" class="upload-btn" id="auditBtn" disabled>Generate Drafting Audit Report</button>
            <button type="button" class="upload-btn" id="clearAnalysisBtn" style="display:none;">Clear & Start Over</button>
        </div>
        
        <div class="spinner" id="analyzeSpinner">
            <div class="spinner-icon"></div>
            <div id="spinnerText">Analyzing document...</div>
        </div>
        
        <div class="analysis-results" id="analysisResults">
            <h3>Analysis Results</h3>
            
            <div id="confidenceDisplay"></div>
            
            <div class="parties-info" id="partiesInfo"></div>
            
            <div class="warnings-list" id="warningsList" style="display:none;">
                <strong>Items Needing Manual Review:</strong>
                <ul id="warningsUl"></ul>
            </div>
            
            <div class="reasoning-section">
                <button type="button" class="reasoning-toggle" id="toggleReasoning">View Analysis Reasoning</button>
                <div class="reasoning-content" id="reasoningContent"></div>
            </div>
            
            <div style="margin-top: 15px;">
                <button type="button" class="upload-btn" id="applySelectionsBtn" style="background: #27ae60; color: white;">Apply Selections to Form</button>
            </div>
        </div>
        
        <div class="audit-report-container" id="auditReportContainer" style="display: none;">
            <div class="audit-report-header">
                <h3>Parenting Plan Drafting Audit Report</h3>
                <p class="disclaimer">This analysis is for informational purposes only and does not constitute legal advice.</p>
                <div class="audit-actions">
                    <button type="button" class="upload-btn" onclick="printAuditReportOnly()">Print Report</button>
                </div>
            </div>
            <div id="auditReportContent"></div>
        </div>
    </div>

    <div class="options-container">
        <div class="option-column">
            <h2>STEP 1: SELECT THE APPROPRIATE OPTIONS BELOW</h2>

            <p>The child is assumed to be with Parent A (the custodial parent) unless specified otherwise. Parent B is the non-custodial parent with <50% PT (or the parent with higher income if the parties excercise PT equally)</p>
            <div class="option-section two-column">
                <div>
                    <h3>Regular Weekly Schedule</h3>
                    <p>Weekend overnights spent with Parent B (Choose one):</p>
                    <label><input type="radio" name="weekly-schedule" value="first-third"> First and third monthly periods(every month)</label><br>
                    <label><input type="radio" name="weekly-schedule" value="second-fourth"> Second and fourth monthly periods</label><br>
                    <label><input type="radio" name="weekly-schedule" value="alternating-odd"> Alternating odd periods</label><br>
                    <label><input type="radio" name="weekly-schedule" value="alternating-even"> Alternating even periods</label><br>
                    <label><input type="radio" name="weekly-schedule" value="every"> Every</label><br>
                    <label><input type="radio" name="weekly-schedule" value="Omit" checked> Omit</label><br>
<div id="regular-begin-end">
                    <p>Beginning 
                        <select name="begin-day">
                            <option value="wednesday">Wednesday</option>
                            <option value="thursday">Thursday</option>
                            <option value="friday" selected>Friday</option>
                            <option value="saturday">Saturday</option>
                            <option value="sunday">Sunday</option>
                            <option value="monday">Monday</option>
                            <option value="tuesday">Tuesday</option>
                        </select> 
                    </p>
                    <p>Ending 
                        <select name="end-day">
                            <option value="saturday">Saturday</option>
                            <option value="sunday" selected>Sunday</option>
                            <option value="monday">Monday</option>
                            <option value="tuesday">Tuesday</option>
                            <option value="wednesday">Wednesday</option>
                            <option value="thursday">Thursday</option>
                            <option value="friday">Friday</option>
                        </select> 
                    </p>
                </div>
                </div>
                <div>
                    <h3>Regular and Recurring Daytime Periods</h3>
                    <p>Select the appropriate options for regular and recurring daytime periods.</p>
                    <label><input type="radio" name="recurring-frequency" value="first-third-recurring"> First and Third</label><br>
                    <label><input type="radio" name="recurring-frequency" value="second-fourth-recurring"> Second and Fourth</label><br>
                    <label><input type="radio" name="recurring-frequency" value="every"> Every Week</label></br>
                    <label><input type="radio" name="recurring-frequency" value="every-other"> Every Other Week</label>

                    <label><input type="radio" name="recurring-frequency" value="Omit" checked> Omit</label>

                    <div id="every-other-options" style="display: none;">
                        <label><input type="radio" name="every-other-type" value="odd" checked> Odd Week</label>
                        <label><input type="radio" name="every-other-type" value="even"> Even Week</label>
                    </div>
<div id="recurring-days">
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="monday"> Monday</label> for <input type="number" name="recurring-hours-monday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="tuesday"> Tuesday</label> for <input type="number" name="recurring-hours-tuesday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="wednesday"> Wednesday</label> for <input type="number" name="recurring-hours-wednesday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="thursday"> Thursday</label> for <input type="number" name="recurring-hours-thursday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="friday"> Friday</label> for <input type="number" name="recurring-hours-friday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="saturday"> Saturday</label> for <input type="number" name="recurring-hours-saturday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
                    <div class="day-row">
                        <label><input type="checkbox" name="recurring-day" value="sunday"> Sunday</label> for <input type="number" name="recurring-hours-sunday" min="0" max="24" step="0.5" class="disabled" disabled> hours
                    </div>
</div>
                </div>
            </div>
<h3><label for="county-select">Select County of the School Calendar to automatically generate Approximate Beginning/Ending holiday dates:</label></h3>
<select id="county-select">
    <option value="barrow">Barrow</option>
    <option value="bibb">Bibb</option>
    <option value="cobb">Cobb</option>
    <option value="dekalb">Dekalb</option>
    <option value="forsyth">Forsyth</option>
    <option value="fulton">Fulton</option>
    <option value="gwinnett" selected>Gwinnett</option>
    <option value="hall">Hall</option>
    <option value="jackson">Jackson</option>
    <option value="newton">Newton</option>
    <option value="rockdale">Rockdale</option>
    <option value="walton">Walton</option></select>
<!-- Spring Break Section -->
<div class="option-section two-column">
  <div>
    <p>The following takes priority over the regular weekly schedule.</p>
    <h3>Spring Break - EVEN YEARS</h3>
        <h4>Spring Break takes priority over Easter</h4>
    
    <div class="parent-selection">
      <input type="radio" id="evenSpringBreakParentA" name="evenSpringBreakParent" value="A">
      <label for="evenSpringBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenSpringBreakParentB" name="evenSpringBreakParent" value="B">
      <label for="evenSpringBreakParentB">Parent B</label>
      
      <input type="radio" id="evenSpringBreakOmit" name="evenSpringBreakParent" value="Omit" checked>
      <label for="evenSpringBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenSpringDates">
    <div class="date-picker">
      <label for="evenSpringBreakStart">Beginning:</label>
      <input type="date" id="evenSpringBreakStart" name="evenSpringBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="evenSpringBreakEnd">Ending:</label>
      <input type="date" id="evenSpringBreakEnd" name="evenSpringBreakEnd">
    </div>
  </div>
  </div>
  <div>
    <p>The following takes priority over the regular weekly schedule.</p>
    <h3>Spring Break - ODD YEARS</h3>
        <h4>Spring Break takes priority over Easter</h4>
    <div class="parent-selection">
      <input type="radio" id="oddSpringBreakParentA" name="oddSpringBreakParent" value="A">
      <label for="oddSpringBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddSpringBreakParentB" name="oddSpringBreakParent" value="B">
      <label for="oddSpringBreakParentB">Parent B</label>
      
      <input type="radio" id="oddSpringBreakOmit" name="oddSpringBreakParent" value="Omit" checked>
      <label for="oddSpringBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddSpringDates">
    <div class="date-picker">
      <label for="oddSpringBreakStart">Beginning:</label>
      <input type="date" id="oddSpringBreakStart" name="oddSpringBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="oddSpringBreakEnd">Ending:</label>
      <input type="date" id="oddSpringBreakEnd" name="oddSpringBreakEnd">
    </div>
  </div>
</div>
</div>

<!-- Fall Break Section -->
<div class="option-section two-column">
  <div>
    <h3>Fall Break - EVEN YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="evenFallBreakParentA" name="evenFallBreakParent" value="A">
      <label for="evenFallBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenFallBreakParentB" name="evenFallBreakParent" value="B">
      <label for="evenFallBreakParentB">Parent B</label>
      
      <input type="radio" id="evenFallBreakOmit" name="evenFallBreakParent" value="Omit" checked>
      <label for="evenFallBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenFallDates">
    <div class="date-picker">
      <label for="evenFallBreakStart">Beginning:</label>
      <input type="date" id="evenFallBreakStart" name="evenFallBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="evenFallBreakEnd">Ending:</label>
      <input type="date" id="evenFallBreakEnd" name="evenFallBreakEnd">
    </div>
  </div>
  </div>
  <div>
    <h3>Fall Break - ODD YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="oddFallBreakParentA" name="oddFallBreakParent" value="A">
      <label for="oddFallBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddFallBreakParentB" name="oddFallBreakParent" value="B">
      <label for="oddFallBreakParentB">Parent B</label>
      
      <input type="radio" id="oddFallBreakOmit" name="oddFallBreakParent" value="Omit" checked>
      <label for="oddFallBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddFallDates">
    <div class="date-picker">
      <label for="oddFallBreakStart">Beginning:</label>
      <input type="date" id="oddFallBreakStart" name="oddFallBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="oddFallBreakEnd">Ending:</label>
      <input type="date" id="oddFallBreakEnd" name="oddFallBreakEnd">
    </div>
  </div>
</div>
</div>


<!-- Thanksgiving Break Section -->
<div class="option-section two-column">
  <div>
    <h3>Thanksgiving Break - EVEN YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="evenThanksgivingBreakParentA" name="evenThanksgivingBreakParent" value="A">
      <label for="evenThanksgivingBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenThanksgivingBreakParentB" name="evenThanksgivingBreakParent" value="B">
      <label for="evenThanksgivingBreakParentB">Parent B</label><br>

          <input type="radio" id="evenThanksgivingBreakSplit" name="evenThanksgivingBreakParent" value="Split">
          <label for="evenThanksgivingBreakSplit">Split</label>
      
      <input type="radio" id="evenThanksgivingBreakOmit" name="evenThanksgivingBreakParent" value="Omit" checked>
      <label for="evenThanksgivingBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenThanksgivingDates">
    <div class="date-picker">
      <label for="evenThanksgivingBreakStart">Beginning:</label>
      <input type="date" id="evenThanksgivingBreakStart" name="evenThanksgivingBreakStart">
    </div>
    
    <div class="date-picker exchange">
      <label for="evenThanksgivingBreakExchange">Exchange:</label>
      <input type="date" id="evenThanksgivingBreakExchange" name="evenThanksgivingBreakExchange">
    </div>
    
    <div class="date-picker">
      <label for="evenThanksgivingBreakEnd">Ending:</label>
      <input type="date" id="evenThanksgivingBreakEnd" name="evenThanksgivingBreakEnd">
    </div>
  </div>
    <div class="parent-selection-FirstSplit">
      First Period with: <input type="radio" id="evenThanksgivingBreakParentAFirstSplit" name="evenThanksgivingBreakParentFirstSplit" value="A">
      <label for="evenThanksgivingBreakParentAFirstSplit">Parent A</label><br>
      
      <input type="radio" id="evenThanksgivingBreakParentBFirstSplit" name="evenThanksgivingBreakParentFirstSplit" value="B">
      <label for="evenThanksgivingBreakParentBFirstSplit">Parent B</label>
      
    </div>
  </div>
  <div>
    <h3>Thanksgiving Break - ODD YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="oddThanksgivingBreakParentA" name="oddThanksgivingBreakParent" value="A">
      <label for="oddThanksgivingBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddThanksgivingBreakParentB" name="oddThanksgivingBreakParent" value="B">
      <label for="oddThanksgivingBreakParentB">Parent B</label><br>

          <input type="radio" id="oddThanksgivingBreakSplit" name="oddThanksgivingBreakParent" value="Split">
          <label for="oddThanksgivingBreakSplit">Split</label>
      
      <input type="radio" id="oddThanksgivingBreakOmit" name="oddThanksgivingBreakParent" value="Omit" checked>
      <label for="oddThanksgivingBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddThanksgivingDates">
    <div class="date-picker">
      <label for="oddThanksgivingBreakStart">Beginning:</label>
      <input type="date" id="oddThanksgivingBreakStart" name="oddThanksgivingBreakStart">
    </div>
    
    <div class="date-picker exchange">
      <label for="oddThanksgivingBreakExchange">Exchange:</label>
      <input type="date" id="oddThanksgivingBreakExchange" name="oddThanksgivingBreakExchange">
    </div>
    
    <div class="date-picker">
      <label for="oddThanksgivingBreakEnd">Ending:</label>
      <input type="date" id="oddThanksgivingBreakEnd" name="oddThanksgivingBreakEnd">
    </div>
  </div>
    <div class="parent-selection-FirstSplit">
      First Period with: <br><input type="radio" id="oddThanksgivingBreakParentAFirstSplit" name="oddThanksgivingBreakParentFirstSplit" value="A">
      <label for="oddThanksgivingBreakParentAFirstSplit">Parent A</label><br>
      
      <input type="radio" id="oddThanksgivingBreakParentBFirstSplit" name="oddThanksgivingBreakParentFirstSplit" value="B">
      <label for="oddThanksgivingBreakParentBFirstSplit">Parent B</label>
      
    </div>
</div>
</div>

<!-- Christmas/Winter Break Section -->
<div class="option-section two-column">
  <div>
    <h3>Christmas/Winter Break - EVEN YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="evenChristmasBreakParentA" name="evenChristmasBreakParent" value="A">
      <label for="evenChristmasBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenChristmasBreakParentB" name="evenChristmasBreakParent" value="B">
      <label for="evenChristmasBreakParentB">Parent B</label><br>

          <input type="radio" id="evenChristmasBreakSplit" name="evenChristmasBreakParent" value="Split">
          <label for="evenChristmasBreakSplit">Split</label>
      
      <input type="radio" id="evenChristmasBreakOmit" name="evenChristmasBreakParent" value="Omit" checked>
      <label for="evenChristmasBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenChristmasDates">
    <div class="date-picker">
      <label for="evenChristmasBreakStart">Beginning:</label>
      <input type="date" id="evenChristmasBreakStart" name="evenChristmasBreakStart">
    </div>
    
    <div class="date-picker exchange">
      <label for="evenChristmasBreakExchange">Exchange:</label>
      <input type="date" id="evenChristmasBreakExchange" name="evenChristmasBreakExchange">
    </div>
    
    <div class="date-picker">
      <label for="evenChristmasBreakEnd">Ending:</label>
      <input type="date" id="evenChristmasBreakEnd" name="evenChristmasBreakEnd">
    </div>
  </div>
    <div class="parent-selection-FirstSplit">
      First Period with: <br><input type="radio" id="evenChristmasBreakParentAFirstSplit" name="evenChristmasBreakParentFirstSplit" value="A">
      <label for="evenChristmasBreakParentAFirstSplit">Parent A</label><br>
      
      <input type="radio" id="evenChristmasBreakParentBFirstSplit" name="evenChristmasBreakParentFirstSplit" value="B">
      <label for="evenChristmasBreakParentBFirstSplit">Parent B</label>
      
    </div>
  </div>
  <div>
    <h3>Christmas/Winter Break - ODD YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="oddChristmasBreakParentA" name="oddChristmasBreakParent" value="A">
      <label for="oddChristmasBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddChristmasBreakParentB" name="oddChristmasBreakParent" value="B">
      <label for="oddChristmasBreakParentB">Parent B</label><br>

          <input type="radio" id="oddChristmasBreakSplit" name="oddChristmasBreakParent" value="Split">
          <label for="oddChristmasBreakSplit">Split</label>
      
      <input type="radio" id="oddChristmasBreakOmit" name="oddChristmasBreakParent" value="Omit" checked>
      <label for="oddChristmasBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddChristmasDates">
    <div class="date-picker">
      <label for="oddChristmasBreakStart">Beginning:</label>
      <input type="date" id="oddChristmasBreakStart" name="oddChristmasBreakStart">
    </div>
    
    <div class="date-picker exchange">
      <label for="oddChristmasBreakExchange">Exchange:</label>
      <input type="date" id="oddChristmasBreakExchange" name="oddChristmasBreakExchange">
    </div>
    
    <div class="date-picker">
      <label for="oddChristmasBreakEnd">Ending:</label>
      <input type="date" id="oddChristmasBreakEnd" name="oddChristmasBreakEnd">
    </div>
  </div>
    <div class="parent-selection-FirstSplit">
      First Period with: <br><input type="radio" id="oddChristmasBreakParentAFirstSplit" name="oddChristmasBreakParentFirstSplit" value="A">
      <label for="oddChristmasBreakParentAFirstSplit">Parent A</label><br>
      
      <input type="radio" id="oddChristmasBreakParentBFirstSplit" name="oddChristmasBreakParentFirstSplit" value="B">
      <label for="oddChristmasBreakParentBFirstSplit">Parent B</label>
      
    </div>
</div>
</div>

<!-- February Winter Break Section -->
<div class="option-section two-column">
  <div>
    <h3>February Winter Break - EVEN YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="evenWinterBreakParentA" name="evenWinterBreakParent" value="A">
      <label for="evenWinterBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenWinterBreakParentB" name="evenWinterBreakParent" value="B">
      <label for="evenWinterBreakParentB">Parent B</label>
      
      <input type="radio" id="evenWinterBreakOmit" name="evenWinterBreakParent" value="Omit" checked>
      <label for="evenWinterBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenWinterDates">
    <div class="date-picker">
      <label for="evenWinterBreakStart">Beginning:</label>
      <input type="date" id="evenWinterBreakStart" name="evenWinterBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="evenWinterBreakEnd">Ending:</label>
      <input type="date" id="evenWinterBreakEnd" name="evenWinterBreakEnd">
    </div>
  </div>
  </div>
  <div>
    <h3>February Winter Break - ODD YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="oddWinterBreakParentA" name="oddWinterBreakParent" value="A">
      <label for="oddWinterBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddWinterBreakParentB" name="oddWinterBreakParent" value="B">
      <label for="oddWinterBreakParentB">Parent B</label>
      
      <input type="radio" id="oddWinterBreakOmit" name="oddWinterBreakParent" value="Omit" checked>
      <label for="oddWinterBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddWinterDates">
    <div class="date-picker">
      <label for="oddWinterBreakStart">Beginning:</label>
      <input type="date" id="oddWinterBreakStart" name="oddWinterBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="oddWinterBreakEnd">Ending:</label>
      <input type="date" id="oddWinterBreakEnd" name="oddWinterBreakEnd">
    </div>
  </div>
</div>
</div>
<!-- March/Other Break Section -->
<div class="option-section two-column">
  <div>
    <h3>March/Other Break - EVEN YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="evenOtherBreakParentA" name="evenOtherBreakParent" value="A">
      <label for="evenOtherBreakParentA">Parent A</label><br>
      
      <input type="radio" id="evenOtherBreakParentB" name="evenOtherBreakParent" value="B">
      <label for="evenOtherBreakParentB">Parent B</label>
      
      <input type="radio" id="evenOtherBreakOmit" name="evenOtherBreakParent" value="Omit" checked>
      <label for="evenOtherBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="evenOtherDates">
    <div class="date-picker">
      <label for="evenOtherBreakStart">Beginning:</label>
      <input type="date" id="evenOtherBreakStart" name="evenOtherBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="evenOtherBreakEnd">Ending:</label>
      <input type="date" id="evenOtherBreakEnd" name="evenOtherBreakEnd">
    </div>
  </div>
  </div>
  <div>
    <h3>March/Other Break - ODD YEARS</h3>
    
    <div class="parent-selection">
      <input type="radio" id="oddOtherBreakParentA" name="oddOtherBreakParent" value="A">
      <label for="oddOtherBreakParentA">Parent A</label><br>
      
      <input type="radio" id="oddOtherBreakParentB" name="oddOtherBreakParent" value="B">
      <label for="oddOtherBreakParentB">Parent B</label>
      
      <input type="radio" id="oddOtherBreakOmit" name="oddOtherBreakParent" value="Omit" checked>
      <label for="oddOtherBreakOmit">Omit</label>
    </div>
    
    <div class="date-selection" id="oddOtherDates">
    <div class="date-picker">
      <label for="oddOtherBreakStart">Beginning:</label>
      <input type="date" id="oddOtherBreakStart" name="oddOtherBreakStart">
    </div>
    
    <div class="date-picker">
      <label for="oddOtherBreakEnd">Ending:</label>
      <input type="date" id="oddOtherBreakEnd" name="oddOtherBreakEnd">
    </div>
  </div>
</div>
</div>
<!-- Summer Schedule Section -->
<div class="option-section two-column">
  <div>
    <h3>Summer Schedule - EVEN YEARS</h3>
    <p> Enter the weeks each parent has parenting time. The summer schedule will take priority over the regular weekly schedule and Fourth of July but does not take priority over Father's day</p>
    
    <div class="summer-schedule-options">
<label>
        <input type="radio" id="evenSummer1Week" name="evenSummerSchedule" value="1week">
        <label for="evenSummer1Week">1 week</label>
        
        <input type="radio" id="evenSummer2Weeks" name="evenSummerSchedule" value="2weeks">
        <label for="evenSummer2Weeks">2 weeks</label>
        
        <input type="radio" id="evenSummer3Weeks" name="evenSummerSchedule" value="3weeks">
        <label for="evenSummer3Weeks">3 weeks</label>

        <input type="radio" id="evenSummer4Weeks" name="evenSummerSchedule" value="4weeks">
        <label for="evenSummer4Weeks">4 weeks</label><label>
        <input type="radio" id="evenSummerAlternating" name="evenSummerSchedule" value="alternating">
        <label for="evenSummerAlternating">Alternating weeks</label>

        <input type="radio" id="evenSummerOmit" name="evenSummerSchedule" value="Omit" checked>
        <label for="evenSummerOmit">Omit</label>
</label>
</label><br><label>
        <input type="radio" id="evenSummerAll" name="evenSummerSchedule" value="All">
        <label for="evenSummer5Weeks">Parent B only from the first Saturday after school is released until the last Sunday before school resumes.</label>
</label>
    </div>
  </div>
  
  <div>
    <h3>Summer Schedule - ODD YEARS</h3>
    <p>The summer schedule will take priority over the regular weekly schedule during the months of June, July and August only when a selection is made.</p>
    
    <div class="summer-schedule-options">
<label>
        <input type="radio" id="oddSummer1Week" name="oddSummerSchedule" value="1week">
        <label for="oddSummer1Week">1 week</label>
        
        <input type="radio" id="oddSummer2Weeks" name="oddSummerSchedule" value="2weeks">
        <label for="oddSummer2Weeks">2 weeks</label>
        
        <input type="radio" id="oddSummer3Weeks" name="oddSummerSchedule" value="3weeks">
        <label for="oddSummer3Weeks">3 weeks</label>

        <input type="radio" id="oddSummer4Weeks" name="oddSummerSchedule" value="4weeks">
        <label for="oddSummer4Weeks">4 weeks</label>

</label><br><label>
        <input type="radio" id="oddSummerAlternating" name="oddSummerSchedule" value="alternating">
        <label for="oddSummerAlternating">Alternating weeks</label><label>

</label>
        <input type="radio" id="oddSummerOmit" name="oddSummerSchedule" value="Omit" checked>
        <label for="oddSummerOmit">Omit</label>
</label><br><label>
        <input type="radio" id="oddSummerAll" name="oddSummerSchedule" value="All">
        <label for="oddSummerAll">Parent B only from the first Saturday after school is released until the last Sunday before school resumes.</label>
</label>
    </div>
  </div>
</div>

<div class="option-section two-column">
  <div id="holiday-even" class="schedule even-years">
    <h3>Holiday Schedule - EVEN YEARS</h3>
    <p>The following holiday schedule will take priority over the regular weekly and summer schedules. Select the parent with whom the child will spend each holiday.</p>
<table>
      <tr>
        <th>Holiday</th>
        <th>Parent A</th>
        <th>Parent B</th>
        <th>Omit</th>
        <th>Beginning</th>
        <th>Ending</th>
      </tr>
      <tr>
        <td>Martin Luther King Jr. Day Weekend</td>
        <td><input type="radio" name="mlk-even" value="parent-a"></td>
        <td><input type="radio" name="mlk-even" value="parent-b"></td>
        <td><input type="radio" name="mlk-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginMLK"></td>
        <td><input type="date" id="evenEndMLK"></td>
      </tr>
      <tr>
        <td>Presidents' Day Weekend</td>
        <td><input type="radio" name="presidents-even" value="parent-a"></td>
        <td><input type="radio" name="presidents-even" value="parent-b"></td>
        <td><input type="radio" name="presidents-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginPresidents"></td>
        <td><input type="date" id="evenEndPresidents"></td>
      </tr>
      <tr>
        <td>Easter Weekend</td>
        <td><input type="radio" name="easter-even" value="parent-a"></td>
        <td><input type="radio" name="easter-even" value="parent-b"></td>
        <td><input type="radio" name="easter-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginEaster"></td>
        <td><input type="date" id="evenEndEaster"></td>
      </tr>
      <tr>
        <td>Mother's Day Weekend</td>
        <td><input type="radio" name="mothers-day-even" value="parent-a"></td>
        <td><input type="radio" name="mothers-day-even" value="parent-b"></td>
        <td><input type="radio" name="mothers-day-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginMothers"></td>
        <td><input type="date" id="evenEndMothers"></td>
      </tr>
      <tr>
        <td>Memorial Day Weekend</td>
        <td><input type="radio" name="memorial-day-even" value="parent-a"></td>
        <td><input type="radio" name="memorial-day-even" value="parent-b"></td>
        <td><input type="radio" name="memorial-day-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginMemorial"></td>
        <td><input type="date" id="evenEndMemorial"></td>
      </tr>
      <tr>
        <td>Father's Day Weekend</td>
        <td><input type="radio" name="fathers-day-even" value="parent-a"></td>
        <td><input type="radio" name="fathers-day-even" value="parent-b"></td>
        <td><input type="radio" name="fathers-day-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginFathers"></td>
        <td><input type="date" id="evenEndFathers"></td>
      </tr>

      <tr>
        <td>Fourth of July Holiday</td>
        <td><input type="radio" name="july-fourth-even" value="parent-a"></td>
        <td><input type="radio" name="july-fourth-even" value="parent-b"></td>
        <td><input type="radio" name="july-fourth-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginJuly4"></td>
        <td><input type="date" id="evenEndJuly4"></td>
      </tr>
      <tr>
        <td>Labor Day Weekend</td>
        <td><input type="radio" name="labor-day-even" value="parent-a"></td>
        <td><input type="radio" name="labor-day-even" value="parent-b"></td>
        <td><input type="radio" name="labor-day-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginLabor"></td>
        <td><input type="date" id="evenEndLabor"></td>
      </tr>
      <tr>
        <td>Halloween Day</td>
        <td><input type="radio" name="halloween-even" value="parent-a"></td>
        <td><input type="radio" name="halloween-even" value="parent-b"></td>
        <td><input type="radio" name="halloween-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginHalloween"></td>
        <td><input type="date" id="evenEndHalloween"></td>
      </tr>
      <tr>
        <td>Veterans Day</td>
        <td><input type="radio" name="veterans-day-even" value="parent-a"></td>
        <td><input type="radio" name="veterans-day-even" value="parent-b"></td>
        <td><input type="radio" name="veterans-day-even" value="omit" checked></td>
        <td><input type="date" id="evenBeginVeterans"></td>
        <td><input type="date" id="evenEndVeterans"></td>
      </tr>
    </table>
  </div>
  
  <div class="schedule odd-years">
    <h3>Holiday Schedule - ODD YEARS</h3>
    <p>The following holiday schedule will take priority over the regular weekly and summer schedules. Select the parent with whom the child will spend each holiday.</p>
    <table>
      <tr>
        <th>Holiday</th>
        <th>Parent A</th>
        <th>Parent B</th>
        <th>Omit</th>
        <th>Beginning</th>
        <th>Ending</th>
      </tr>
      <tr>
        <td>Martin Luther King Jr. Day Weekend</td>
        <td><input type="radio" name="mlk-odd" value="parent-a"></td>
        <td><input type="radio" name="mlk-odd" value="parent-b"></td>
        <td><input type="radio" name="mlk-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginMLK"></td>
        <td><input type="date" id="oddEndMLK"></td>
      </tr>
      <tr>
        <td>Presidents' Day Weekend</td>
        <td><input type="radio" name="presidents-odd" value="parent-a"></td>
        <td><input type="radio" name="presidents-odd" value="parent-b"></td>
        <td><input type="radio" name="presidents-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginPresidents"></td>
        <td><input type="date" id="oddEndPresidents"></td>
      </tr>
      <tr>
        <td>Easter Weekend</td>
        <td><input type="radio" name="easter-odd" value="parent-a"></td>
        <td><input type="radio" name="easter-odd" value="parent-b"></td>
        <td><input type="radio" name="easter-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginEaster"></td>
        <td><input type="date" id="oddEndEaster"></td>
      </tr>
      <tr>
        <td>Mother's Day Weekend</td>
        <td><input type="radio" name="mothers-day-odd" value="parent-a"></td>
        <td><input type="radio" name="mothers-day-odd" value="parent-b"></td>
        <td><input type="radio" name="mothers-day-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginMothers"></td>
        <td><input type="date" id="oddEndMothers"></td>
      </tr>
      <tr>
        <td>Memorial Day Weekend</td>
        <td><input type="radio" name="memorial-day-odd" value="parent-a"></td>
        <td><input type="radio" name="memorial-day-odd" value="parent-b"></td>
        <td><input type="radio" name="memorial-day-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginMemorial"></td>
        <td><input type="date" id="oddEndMemorial"></td>
      </tr>
      <tr>
        <td>Father's Day Weekend</td>
        <td><input type="radio" name="fathers-day-odd" value="parent-a"></td>
        <td><input type="radio" name="fathers-day-odd" value="parent-b"></td>
        <td><input type="radio" name="fathers-day-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginFathers"></td>
        <td><input type="date" id="oddEndFathers"></td>
      </tr>
      <tr>
      <tr>
        <td>Fourth of July Holiday</td>
        <td><input type="radio" name="july-fourth-odd" value="parent-a"></td>
        <td><input type="radio" name="july-fourth-odd" value="parent-b"></td>
        <td><input type="radio" name="july-fourth-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginJuly4"></td>
        <td><input type="date" id="oddEndJuly4"></td>
      </tr>
      <tr>
        <td>Labor Day Weekend</td>
        <td><input type="radio" name="labor-day-odd" value="parent-a"></td>
        <td><input type="radio" name="labor-day-odd" value="parent-b"></td>
        <td><input type="radio" name="labor-day-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginLabor"></td>
        <td><input type="date" id="oddEndLabor"></td>
      </tr>
      <tr>
        <td>Halloween Day</td>
        <td><input type="radio" name="halloween-odd" value="parent-a"></td>
        <td><input type="radio" name="halloween-odd" value="parent-b"></td>
        <td><input type="radio" name="halloween-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginHalloween"></td>
        <td><input type="date" id="oddEndHalloween"></td>
      </tr>
      <tr>
        <td>Veterans Day</td>
        <td><input type="radio" name="veterans-day-odd" value="parent-a"></td>
        <td><input type="radio" name="veterans-day-odd" value="parent-b"></td>
        <td><input type="radio" name="veterans-day-odd" value="omit" checked></td>
        <td><input type="date" id="oddBeginVeterans"></td>
        <td><input type="date" id="oddEndVeterans"></td>
      </tr>
    </table>
  </div>
</div>
<div class="option-section two-column">
    <div class="button-section">
    <h4>Step 2: Click on the 'POPULATE CALENDARS' button to have the dates marked above automatically filled in by the calendar tool.</h4>
    <button id="populate-button">POPULATE CALENDARS</button>
    <button id="reset-button">RESET</button>
<br>

    
 <br>
        <input type="number" id="total-days" step=".1" readonly>
        <label for="total-days">Total Days of Parenting Time for Parent B (Non-custodial) Over 24 months</label>
<br>
        <input type="number" id="average-days" step=".1" readonly>
        <label for="total-days">TWO-YEAR AVERAGE of Parent B's number of parenting days per year (half the number above)</label>
<br>
    <input type="number" id="ParentBpct" step=".1" readonly>
    <label for="ParentBpct">% PT for the Noncustodial Parent</label>
<h4>Step 3: You may manually adjust the calendar below as needed & the day total will update.</h4>
    </div>

    <div class="button-section">
    <h4>Step 4: Create a worksheet at <a href="https://csconlinecalc.georgiacourts.gov/frontend/web/index.php">https://csconlinecalc.georgiacourts.gov/frontend/web/index.php</a> . Then, enter data from Line 5 of the CSW below and click "Apply Formula" button.</h4>
    <input type="number" min="0.00" max="10000.00" step="0.01" id="parentA-L5" >
    <label for="parentA-L5">Custodial Line 5</label>
<br>
    <input type="number" min="0.00" max="10000.00" step="0.01" id="parentB-L5" >
    <label for="parentB-L5">Non-Cust  Line 5</label>
<br>
    <button id="calculate-button">Apply Formula</button>
<br>
    <input type="number" min="0.00" max="10000.00" step="0.01" id="final-adjustment" readonly>
    <label for="final-adjustment">Parenting Time Adjustment/ Deviation Amount*</label>
<br><br>
*Generally, to be deducted from the noncustodial parent's obligation, by using the Parenting Time Deviation as found on Schedule E of the <a href="https://csconlinecalc.georgiacourts.gov/frontend/web/index.php">Child Support Calculator</a><br>
        <h4>Step 4: Save/Print your work</h4><button id="export-pdf">Export/Print to PDF</button>
        <span style="font-size: 0.8em; color: #666;">(Select 'Save as PDF' in the printer options)</span>

    </div>

</div>
<div class="notes-section">
<p>Notes: </p>
<p>To create a "50/50" alternating weeks schedule, set the Beginning and Ending as the same day of the week in the Regular Weekly Schedule.</p>
<p>The text of any court order takes precidence over this calendar even if this calendar is attached as an exhibit. The calendar is a visualization aid and is non-binding.</p>
<p>Dates of breaks may vary by school. All default dates are calculated by a computer formula and may not reflect actual break periods for any particular school. They are approximate dates only and based on some historical Gwinnett County school calendars.</p>
<p>This tool does not account for alternating 5th weekends. Those must be added by you manually by typing a "1" on appropriate date on the calendar below.</p>
<p>Because exact summer vacation dates are often undetermined until closer to summer, this tool assigns June weeks to Parent B and July weeks to Parent A. Selecting the option "Parent B only from the first Saturday after school is released until the last Sunday before school resumes." will block out only 8 weeks. You will need to manually add additional days based on your child's school calendar.</p>
<p>This tool gives the Summer Schedule priority over the Holiday Schedule. This may impact Father's Day and July 4th if your case's Parenting Plan sets a different priority order. Adjust the numbers manually as necessary.</p>
<p>The formula for the final PT adjustment is ((CB<sup>2.5</sup>-DA<sup>2.5</sup>)/(B<sup>2.5</sup>+A<sup>2.5</sup>))+D ; Where: A=Custodial Days, B=Noncustodial Days, C=Custodial Line 5 from CSW and, D=Noncustodial Line 5 from CSW.</p>
<p>Fractional days may show up in the calendar as a decimal rounded to the nearest tenth of an hour. However, on the software's back-end, that number is not rounded. This eliminates rounding error when all the values are summed in Step 3.</p><br>
</div>
    <div id="calendar" class="calendar-container"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    generateCalendar();


    const countySelect = document.getElementById('county-select');
    populateHolidayDates(countySelect.value);

    countySelect.addEventListener('change', function() {
        populateHolidayDates(countySelect.value);
    });

    document.getElementById('populate-button').addEventListener('click', function() {
        handlePopulateCalendars();
        updateTotalDays();
        refreshAllDisplayValues();
    });
    document.getElementById('reset-button').addEventListener('click', function() {
        resetAllSpinBoxes();
        refreshAllDisplayValues();
    });
    document.getElementById('calculate-button').addEventListener('click', calculatePTAdjustment);

    // Show or hide the every-other options based on the selected frequency
    document.querySelectorAll('input[name="recurring-frequency"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const everyOtherOptions = document.getElementById('every-other-options');
            if (this.value === 'every-other') {
                everyOtherOptions.style.display = 'block';
            } else {
                everyOtherOptions.style.display = 'none';
            }
        });
    });

    // Enable or disable the hours input based on the corresponding checkbox
    document.querySelectorAll('input[name="recurring-day"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const hoursInput = document.querySelector(`input[name="recurring-hours-${this.value}"]`);
            if (this.checked) {
                hoursInput.classList.remove('disabled');
                hoursInput.disabled = false;
            } else {
                hoursInput.classList.add('disabled');
                hoursInput.disabled = true;
            }
        });
    });
    ['even', 'odd'].forEach(year => {
        ['Thanksgiving', 'Christmas'].forEach(holiday => {
            const radioButtons = document.querySelectorAll(`input[name="${year}${holiday}BreakParent"]`);
            const exchangeDatePicker = document.querySelector(`#${year}${holiday}BreakExchange`).parentNode;

            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Split') {
                        exchangeDatePicker.style.display = 'block';
                    } else {
                        exchangeDatePicker.style.display = 'none';
                    }
                });
            });
        });
    });
    ['even', 'odd'].forEach(year => {
        ['Thanksgiving', 'Christmas'].forEach(holiday => {
            const radioButtons = document.querySelectorAll(`input[name="${year}${holiday}BreakParent"]`);
            const exchangeDatePicker = document.querySelector(`#${year}${holiday}BreakExchange`).parentNode;
            const firstSplitDiv = document.querySelector(`.parent-selection-FirstSplit input[name="${year}${holiday}BreakParentFirstSplit"]`).parentNode;

            radioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Split') {
                        exchangeDatePicker.style.display = 'block';
                        firstSplitDiv.style.display = 'block';
                    } else {
                        exchangeDatePicker.style.display = 'none';
                        firstSplitDiv.style.display = 'none';
                    }
                });
            });
        });
    });
    toggleVisibility('weekly-schedule', 'regular-begin-end');
    toggleVisibility('recurring-frequency', 'recurring-days');
    toggleVisibility('evenSpringBreakParent', 'evenSpringDates');
    toggleVisibility('oddSpringBreakParent', 'oddSpringDates');
    toggleVisibility('evenFallBreakParent', 'evenFallDates');
    toggleVisibility('oddFallBreakParent', 'oddFallDates');
    toggleVisibility('evenThanksgivingBreakParent', 'evenThanksgivingDates');
    toggleVisibility('oddThanksgivingBreakParent', 'oddThanksgivingDates');
    toggleVisibility('evenChristmasBreakParent', 'evenChristmasDates');
    toggleVisibility('oddChristmasBreakParent', 'oddChristmasDates');
    toggleVisibility('evenWinterBreakParent', 'evenWinterDates');
    toggleVisibility('oddWinterBreakParent', 'oddWinterDates');
    toggleVisibility('evenOtherBreakParent', 'evenOtherDates');
    toggleVisibility('oddOtherBreakParent', 'oddOtherDates');

    // Document Analyzer functionality
    let analysisData = null;
    const pdfFileInput = document.getElementById('pdfFile');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const clearAnalysisBtn = document.getElementById('clearAnalysisBtn');
    const analyzeSpinner = document.getElementById('analyzeSpinner');
    const analysisResults = document.getElementById('analysisResults');
    const fileName = document.getElementById('fileName');
    const dropZone = document.getElementById('dropZone');
    const toggleReasoningBtn = document.getElementById('toggleReasoning');
    const reasoningContent = document.getElementById('reasoningContent');
    const applySelectionsBtn = document.getElementById('applySelectionsBtn');

    // File input handling
    const auditBtn = document.getElementById('auditBtn');
    
    pdfFileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            fileName.textContent = 'Selected: ' + this.files[0].name;
            analyzeBtn.disabled = false;
            auditBtn.disabled = false;
        } else {
            fileName.textContent = '';
            analyzeBtn.disabled = true;
            auditBtn.disabled = true;
        }
    });

    // Drag and drop handling
    dropZone.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.style.background = 'rgba(255,255,255,0.3)';
    });

    dropZone.addEventListener('dragleave', function(e) {
        e.preventDefault();
        this.style.background = 'rgba(255,255,255,0.15)';
    });

    dropZone.addEventListener('drop', function(e) {
        e.preventDefault();
        this.style.background = 'rgba(255,255,255,0.15)';
        const files = e.dataTransfer.files;
        if (files.length > 0 && files[0].type === 'application/pdf') {
            pdfFileInput.files = files;
            fileName.textContent = 'Selected: ' + files[0].name;
            analyzeBtn.disabled = false;
            auditBtn.disabled = false;
        }
    });

    // Analyze button handler
    analyzeBtn.addEventListener('click', async function() {
        if (!pdfFileInput.files.length) return;

        const formData = new FormData();
        formData.append('file', pdfFileInput.files[0]);

        analyzeBtn.disabled = true;
        analyzeSpinner.style.display = 'block';
        analysisResults.style.display = 'none';

        try {
            const response = await fetch('/analyze_document', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();

            if (!response.ok) {
                throw new Error(result.error || 'Failed to analyze document');
            }

            analysisData = result;
            displayAnalysisResults(result);
            clearAnalysisBtn.style.display = 'inline-block';
        } catch (error) {
            alert('Error analyzing document: ' + error.message);
        } finally {
            analyzeSpinner.style.display = 'none';
            analyzeBtn.disabled = false;
        }
    });

    // Clear button handler
    clearAnalysisBtn.addEventListener('click', function() {
        analysisData = null;
        pdfFileInput.value = '';
        fileName.textContent = '';
        analysisResults.style.display = 'none';
        clearAnalysisBtn.style.display = 'none';
        analyzeBtn.disabled = true;
        auditBtn.disabled = true;
        reasoningContent.classList.remove('show');
        document.getElementById('auditReportContainer').style.display = 'none';
    });

    // Audit button handler
    auditBtn.addEventListener('click', async function() {
        if (!pdfFileInput.files.length) return;

        const formData = new FormData();
        formData.append('file', pdfFileInput.files[0]);

        auditBtn.disabled = true;
        analyzeBtn.disabled = true;
        analyzeSpinner.style.display = 'block';
        document.getElementById('spinnerText').textContent = 'Generating drafting audit report...';
        analysisResults.style.display = 'none';
        document.getElementById('auditReportContainer').style.display = 'none';

        try {
            const response = await fetch('/generate_audit_report', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();

            if (!response.ok) {
                throw new Error(result.error || 'Failed to generate audit report');
            }

            displayAuditReport(result);
            clearAnalysisBtn.style.display = 'inline-block';
        } catch (error) {
            alert('Error generating audit report: ' + error.message);
        } finally {
            analyzeSpinner.style.display = 'none';
            document.getElementById('spinnerText').textContent = 'Analyzing document...';
            auditBtn.disabled = false;
            analyzeBtn.disabled = false;
        }
    });

    function displayAuditReport(data) {
        const container = document.getElementById('auditReportContainer');
        const content = document.getElementById('auditReportContent');
        
        let html = '';
        
        // Executive Summary
        if (data.executiveSummary) {
            const es = data.executiveSummary;
            const qualityClass = getQualityClass(data.documentSummary?.overallDraftingQuality);
            html += `
                <div class="audit-section executive-summary">
                    <h4>Executive Summary</h4>
                    <div class="quality-badge ${qualityClass}">${data.documentSummary?.overallDraftingQuality || 'Unknown'}</div>
                    <div class="summary-stats">
                        <div class="stat-box critical-stat"><strong>${es.criticalIssuesCount || 0}</strong><br>Critical Issues</div>
                        <div class="stat-box"><strong>${es.totalFindingsCount || 0}</strong><br>Total Findings</div>
                        <div class="stat-box"><strong>${es.estimatedUncapturedOvernights || 'N/A'}</strong><br>Uncaptured Overnights</div>
                    </div>
                    ${es.topThreePriorities ? `
                        <div class="top-priorities">
                            <strong>Top Priorities:</strong>
                            <ol>${es.topThreePriorities.map(p => `<li>${p}</li>`).join('')}</ol>
                        </div>
                    ` : ''}
                    ${es.overallAssessment ? `<p class="overall-assessment">${es.overallAssessment}</p>` : ''}
                </div>
            `;
        }

        // Novel Provisions
        if (data.novelProvisions && data.novelProvisions.length > 0) {
            html += `
                <div class="audit-section">
                    <h4>Novel Provisions Affecting Parenting Time (${data.novelProvisions.length})</h4>
                    ${data.novelProvisions.map(np => `
                        <div class="finding severity-${np.conflictRisk || 'medium'}">
                            <div class="finding-header"><span class="finding-id">${np.id}</span> <span class="finding-category">${np.category}</span></div>
                            <blockquote>${np.quotedText}</blockquote>
                            <p><strong>Description:</strong> ${np.description}</p>
                            <p><strong>Overnight Impact:</strong> ${np.estimatedOvernightImpact}</p>
                            ${np.recommendations ? `<div class="suggestion-box"><strong>Recommendation:</strong> ${np.recommendations}</div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Ambiguities
        if (data.ambiguities && data.ambiguities.length > 0) {
            html += `
                <div class="audit-section">
                    <h4>Ambiguities (${data.ambiguities.length})</h4>
                    ${data.ambiguities.map(amb => `
                        <div class="finding severity-${amb.conflictPotential || 'medium'}">
                            <div class="finding-header"><span class="finding-id">${amb.id}</span> <span class="finding-category">${amb.type}</span></div>
                            <blockquote>${amb.quotedText}</blockquote>
                            <p><strong>Possible Interpretations:</strong></p>
                            <ul>${(amb.interpretations || []).map(i => `<li>${i}</li>`).join('')}</ul>
                            ${amb.suggestedRevision ? `<div class="suggestion-box"><strong>Suggested Revision:</strong><br>${amb.suggestedRevision}<button class="copy-btn" onclick="copyToClipboard(this)">Copy</button></div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Drafting Errors
        if (data.draftingErrors && data.draftingErrors.length > 0) {
            html += `
                <div class="audit-section">
                    <h4>Drafting Errors (${data.draftingErrors.length})</h4>
                    ${data.draftingErrors.map(err => `
                        <div class="finding severity-${err.severity || 'moderate'}">
                            <div class="finding-header"><span class="finding-id">${err.id}</span> <span class="finding-category">${err.type}</span> <span class="severity-label">${err.severity?.toUpperCase()}</span></div>
                            <blockquote>${err.quotedText}</blockquote>
                            <p><strong>Issue:</strong> ${err.explanation}</p>
                            ${err.suggestedCorrection ? `<div class="suggestion-box"><strong>Suggested Correction:</strong><br>${err.suggestedCorrection}<button class="copy-btn" onclick="copyToClipboard(this)">Copy</button></div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Omissions
        if (data.omissions && data.omissions.length > 0) {
            html += `
                <div class="audit-section">
                    <h4>Omissions (${data.omissions.length})</h4>
                    ${data.omissions.map(om => `
                        <div class="finding severity-${om.riskLevel || 'medium'}">
                            <div class="finding-header"><span class="finding-id">${om.id}</span> <span class="finding-category">${om.category}</span></div>
                            <p><strong>Missing:</strong> ${om.description}</p>
                            <p><strong>Potential Consequences:</strong> ${om.consequences}</p>
                            ${om.suggestedProvision ? `<div class="suggestion-box"><strong>Suggested Provision:</strong><br><pre>${om.suggestedProvision}</pre><button class="copy-btn" onclick="copyToClipboard(this)">Copy</button></div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Clarity Improvements
        if (data.clarityImprovements && data.clarityImprovements.length > 0) {
            html += `
                <div class="audit-section">
                    <h4>Clarity Improvements (${data.clarityImprovements.length})</h4>
                    ${data.clarityImprovements.map(clr => `
                        <div class="finding severity-minor">
                            <div class="finding-header"><span class="finding-id">${clr.id}</span></div>
                            <blockquote>${clr.quotedText}</blockquote>
                            <p><strong>Issue:</strong> ${clr.issue}</p>
                            ${clr.suggestedRevision ? `<div class="suggestion-box"><strong>Suggested Revision:</strong><br>${clr.suggestedRevision}<button class="copy-btn" onclick="copyToClipboard(this)">Copy</button></div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        content.innerHTML = html;
        container.style.display = 'block';
    }

    function getQualityClass(quality) {
        if (!quality) return 'quality-unknown';
        const q = quality.toLowerCase().replace(/\s+/g, '-');
        if (q.includes('strong')) return 'quality-strong';
        if (q.includes('adequate')) return 'quality-adequate';
        if (q.includes('needs')) return 'quality-needs-improvement';
        if (q.includes('significant')) return 'quality-significant-issues';
        return 'quality-unknown';
    }

    window.copyToClipboard = function(btn) {
        const text = btn.previousSibling?.textContent || btn.parentElement.textContent.replace('Copy', '').trim();
        navigator.clipboard.writeText(text).then(() => {
            const originalText = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = originalText, 2000);
        });
    };

    // Toggle reasoning display
    toggleReasoningBtn.addEventListener('click', function() {
        reasoningContent.classList.toggle('show');
        this.textContent = reasoningContent.classList.contains('show') 
            ? 'Hide Analysis Reasoning' 
            : 'View Analysis Reasoning';
    });

    // Apply selections button handler
    applySelectionsBtn.addEventListener('click', function() {
        if (analysisData) {
            applyParsedSelections(analysisData);
            alert('Selections have been applied to the form. Please review and click "POPULATE CALENDARS" to generate the calendar.');
        }
    });

    function displayAnalysisResults(data) {
        // Confidence display
        const confidenceDisplay = document.getElementById('confidenceDisplay');
        const confidenceClass = 'confidence-' + (data.confidence || 'medium');
        confidenceDisplay.innerHTML = `<p>Analysis Confidence: <span class="${confidenceClass}">${(data.confidence || 'unknown').toUpperCase()}</span></p>`;
        
        if (data.confidence === 'low') {
            confidenceDisplay.innerHTML += '<div class="warning-banner">Low confidence analysis - please verify all selections carefully before applying.</div>';
        }

        if (data.analysisNotes) {
            confidenceDisplay.innerHTML += `<p><em>${data.analysisNotes}</em></p>`;
        }

        // Parties info
        const partiesInfo = document.getElementById('partiesInfo');
        if (data.identifiedParties) {
            const pa = data.identifiedParties.parentA || {};
            const pb = data.identifiedParties.parentB || {};
            partiesInfo.innerHTML = `
                <div class="party-box">
                    <strong>Parent A (Custodial):</strong><br>
                    ${pa.name || 'Not identified'}<br>
                    <small>${pa.role || ''}</small>
                </div>
                <div class="party-box">
                    <strong>Parent B (Non-Custodial):</strong><br>
                    ${pb.name || 'Not identified'}<br>
                    <small>${pb.role || ''}</small>
                </div>
            `;
        } else {
            partiesInfo.innerHTML = '';
        }

        // Warnings
        const warningsList = document.getElementById('warningsList');
        const warningsUl = document.getElementById('warningsUl');
        if (data.warnings && data.warnings.length > 0) {
            warningsUl.innerHTML = data.warnings.map(w => `<li>${w}</li>`).join('');
            warningsList.style.display = 'block';
        } else {
            warningsList.style.display = 'none';
        }

        // Reasoning content
        buildReasoningContent(data);

        analysisResults.style.display = 'block';
    }

    function buildReasoningContent(data) {
        let html = '<dl>';
        
        if (data.regularWeeklySchedule && data.regularWeeklySchedule.reasoning) {
            html += `<dt><strong>Regular Weekly Schedule:</strong></dt><dd>${data.regularWeeklySchedule.reasoning}</dd>`;
        }
        if (data.recurringDaytimePeriods && data.recurringDaytimePeriods.reasoning) {
            html += `<dt><strong>Recurring Daytime Periods:</strong></dt><dd>${data.recurringDaytimePeriods.reasoning}</dd>`;
        }
        
        ['springBreak', 'fallBreak', 'winterBreak'].forEach(breakType => {
            if (data[breakType]) {
                ['evenYears', 'oddYears'].forEach(yearType => {
                    if (data[breakType][yearType] && data[breakType][yearType].reasoning) {
                        html += `<dt><strong>${breakType} (${yearType}):</strong></dt><dd>${data[breakType][yearType].reasoning}</dd>`;
                    }
                });
            }
        });

        ['thanksgivingBreak', 'christmasBreak'].forEach(breakType => {
            if (data[breakType]) {
                ['evenYears', 'oddYears'].forEach(yearType => {
                    if (data[breakType][yearType] && data[breakType][yearType].reasoning) {
                        html += `<dt><strong>${breakType} (${yearType}):</strong></dt><dd>${data[breakType][yearType].reasoning}</dd>`;
                    }
                });
            }
        });

        if (data.summerSchedule) {
            ['evenYears', 'oddYears'].forEach(yearType => {
                if (data.summerSchedule[yearType] && data.summerSchedule[yearType].reasoning) {
                    html += `<dt><strong>Summer Schedule (${yearType}):</strong></dt><dd>${data.summerSchedule[yearType].reasoning}</dd>`;
                }
            });
        }

        html += '</dl>';
        reasoningContent.innerHTML = html;
    }

    function applyParsedSelections(data) {
        // Helper function to set radio button
        function setRadio(name, value) {
            const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
            if (radio) {
                radio.checked = true;
                radio.dispatchEvent(new Event('change', { bubbles: true }));
            }
        }

        // Helper function to set select
        function setSelect(name, value) {
            const select = document.querySelector(`select[name="${name}"]`);
            if (select && value) {
                select.value = value.toLowerCase();
                select.dispatchEvent(new Event('change', { bubbles: true }));
            }
        }

        // Helper function to set checkbox
        function setCheckbox(name, value, checked) {
            const checkbox = document.querySelector(`input[name="${name}"][value="${value}"]`);
            if (checkbox) {
                checkbox.checked = checked;
                checkbox.dispatchEvent(new Event('change', { bubbles: true }));
            }
        }

        // Helper function to set number input
        function setNumberInput(name, value) {
            const input = document.querySelector(`input[name="${name}"]`);
            if (input && value !== undefined) {
                input.value = value;
                input.disabled = false;
                input.classList.remove('disabled');
            }
        }

        // Regular Weekly Schedule
        if (data.regularWeeklySchedule) {
            setRadio('weekly-schedule', data.regularWeeklySchedule.pattern);
            setSelect('begin-day', data.regularWeeklySchedule.beginDay);
            setSelect('end-day', data.regularWeeklySchedule.endDay);
        }

        // Recurring Daytime Periods
        if (data.recurringDaytimePeriods) {
            setRadio('recurring-frequency', data.recurringDaytimePeriods.frequency);
            
            if (data.recurringDaytimePeriods.everyOtherType) {
                setRadio('every-other-type', data.recurringDaytimePeriods.everyOtherType);
            }

            if (data.recurringDaytimePeriods.days) {
                Object.entries(data.recurringDaytimePeriods.days).forEach(([day, config]) => {
                    if (config.enabled) {
                        setCheckbox('recurring-day', day, true);
                        setNumberInput(`recurring-hours-${day}`, config.hours);
                    }
                });
            }
        }

        // Spring Break
        if (data.springBreak) {
            if (data.springBreak.evenYears) {
                setRadio('evenSpringBreakParent', data.springBreak.evenYears.parent);
            }
            if (data.springBreak.oddYears) {
                setRadio('oddSpringBreakParent', data.springBreak.oddYears.parent);
            }
        }

        // Fall Break
        if (data.fallBreak) {
            if (data.fallBreak.evenYears) {
                setRadio('evenFallBreakParent', data.fallBreak.evenYears.parent);
            }
            if (data.fallBreak.oddYears) {
                setRadio('oddFallBreakParent', data.fallBreak.oddYears.parent);
            }
        }

        // Thanksgiving Break
        if (data.thanksgivingBreak) {
            if (data.thanksgivingBreak.evenYears) {
                setRadio('evenThanksgivingBreakParent', data.thanksgivingBreak.evenYears.parent);
                if (data.thanksgivingBreak.evenYears.firstSplitParent) {
                    setRadio('evenThanksgivingBreakParentFirstSplit', data.thanksgivingBreak.evenYears.firstSplitParent);
                }
            }
            if (data.thanksgivingBreak.oddYears) {
                setRadio('oddThanksgivingBreakParent', data.thanksgivingBreak.oddYears.parent);
                if (data.thanksgivingBreak.oddYears.firstSplitParent) {
                    setRadio('oddThanksgivingBreakParentFirstSplit', data.thanksgivingBreak.oddYears.firstSplitParent);
                }
            }
        }

        // Christmas Break
        if (data.christmasBreak) {
            if (data.christmasBreak.evenYears) {
                setRadio('evenChristmasBreakParent', data.christmasBreak.evenYears.parent);
                if (data.christmasBreak.evenYears.firstSplitParent) {
                    setRadio('evenChristmasBreakParentFirstSplit', data.christmasBreak.evenYears.firstSplitParent);
                }
            }
            if (data.christmasBreak.oddYears) {
                setRadio('oddChristmasBreakParent', data.christmasBreak.oddYears.parent);
                if (data.christmasBreak.oddYears.firstSplitParent) {
                    setRadio('oddChristmasBreakParentFirstSplit', data.christmasBreak.oddYears.firstSplitParent);
                }
            }
        }

        // Winter Break
        if (data.winterBreak) {
            if (data.winterBreak.evenYears) {
                setRadio('evenWinterBreakParent', data.winterBreak.evenYears.parent);
            }
            if (data.winterBreak.oddYears) {
                setRadio('oddWinterBreakParent', data.winterBreak.oddYears.parent);
            }
        }

        // Summer Schedule
        if (data.summerSchedule) {
            if (data.summerSchedule.evenYears) {
                setRadio('evenSummerSchedule', data.summerSchedule.evenYears.option);
            }
            if (data.summerSchedule.oddYears) {
                setRadio('oddSummerSchedule', data.summerSchedule.oddYears.option);
            }
        }

        // Holidays
        if (data.holidays) {
            const holidayMap = {
                'mlk': 'mlk',
                'presidentsDay': 'presidents',
                'easter': 'easter',
                'mothersDay': 'mothers-day',
                'memorialDay': 'memorial-day',
                'fathersDay': 'fathers-day',
                'julyFourth': 'july-fourth',
                'laborDay': 'labor-day',
                'halloween': 'halloween',
                'veteransDay': 'veterans-day'
            };

            Object.entries(holidayMap).forEach(([jsonKey, formKey]) => {
                if (data.holidays[jsonKey]) {
                    if (data.holidays[jsonKey].evenYears) {
                        setRadio(`${formKey}-even`, data.holidays[jsonKey].evenYears);
                    }
                    if (data.holidays[jsonKey].oddYears) {
                        setRadio(`${formKey}-odd`, data.holidays[jsonKey].oddYears);
                    }
                }
            });
        }

        // School County
        if (data.schoolCounty) {
            const countySelect = document.getElementById('county-select');
            if (countySelect) {
                countySelect.value = data.schoolCounty;
                countySelect.dispatchEvent(new Event('change', { bubbles: true }));
            }
        }
    }
});
    document.getElementById('export-pdf').addEventListener('click', function() {
        // Create a style element for print-specific CSS
        const style = document.createElement('style');
        style.textContent = `
            @media print {
                body { 
                    padding: 20px;
                    font-size: 12px;
                }
                input[type="date"],
                select {
                    border: 1px solid #ccc;
                    background: transparent;
                }
                table {
                    border-collapse: collapse;
                    width: 100%;
                }
                th, td {
                    border: 1px solid #000;
                    padding: 2px;
                    text-align: center;
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    color-adjust: exact !important;
                }
                h1, h2, h3, h4 {
                    margin: 10px 0;
                }
                /* Holiday schedule specific (make stacked) */
                .schedule.even-years,
                .schedule.odd-years {
                    display: block;
                    width: 100%;
                    margin-bottom: 20px;
                }
                /* Break schedules (keep side by side) */
                .option-section.two-column {
                    display: flex !important;
                    justify-content: space-between !important;
                    page-break-inside: avoid;
                }
                .option-section.two-column > div {
                    width: 48% !important;
                }
                /* Ensure all content is visible and properly formatted */
                .options-container {
                    display: block !important;
                    width: 100%;
                }
                /* Ensure radio buttons and checkboxes are visible */
                input[type="radio"],
                input[type="checkbox"] {
                    -webkit-print-color-adjust: exact;
                    color-adjust: exact;
                }
                /* Calendar print styles - one month per page, full width */
                .calendar-container {
                    display: block !important;
                }
                .calendar-row {
                    display: block !important;
                }
                .month {
                    width: 100% !important;
                    page-break-after: always;
                    page-break-inside: avoid;
                    margin-bottom: 0 !important;
                }
                .month:last-child {
                    page-break-after: auto;
                }
                .month table {
                    width: 100% !important;
                    font-size: 14px;
                }
                .month th, .month td {
                    padding: 8px !important;
                    font-size: 14px !important;
                }
                .month-header {
                    font-size: 24px !important;
                    font-weight: bold;
                    margin-bottom: 10px;
                }
                /* Hide input on print, show print value span */
                .month input[type="number"] {
                    display: none !important;
                }
                .print-value {
                    display: inline !important;
                    font-size: 12px;
                }
            }
        `;
        document.head.appendChild(style);

        document.body.classList.add('print-main');
        window.print();
        document.body.classList.remove('print-main');

        document.head.removeChild(style);
    });

    function printAuditReportOnly() {
        document.body.classList.add('print-audit-only');
        window.print();
        document.body.classList.remove('print-audit-only');
    }
function calculatePTAdjustment() {
    const parentAL5 = parseFloat(document.getElementById('parentA-L5').value);
    const parentBL5 = parseFloat(document.getElementById('parentB-L5').value);
    const totalDays = parseFloat(document.getElementById('total-days').value);
    const finalAdjustment = document.getElementById('final-adjustment');

    // Clear previous error messages
    clearErrorMessages();

    // Check for missing inputs
    if (isNaN(parentAL5)) {
        showErrorMessage('Custodial Line 5 is missing');
        return;
    }
    if (isNaN(parentBL5)) {
        showErrorMessage('Non-Cust Line 5 is missing');
        return;
    }
    if (isNaN(totalDays)) {
        showErrorMessage('Total Days is missing');
        return;
    }

    // Perform calculation
    const result = 
        ((((parentAL5 * Math.pow(totalDays/2, 2.5)) - 
           (parentBL5 * Math.pow(365 - totalDays/2, 2.5))) / 
          (Math.pow(totalDays/2, 2.5) + Math.pow(365 - totalDays/2, 2.5))) + 
         parentBL5);

    // Update final adjustment field
    finalAdjustment.value = result.toFixed(2);
}

function showErrorMessage(message) {
    const errorDiv = document.createElement('div');
    errorDiv.textContent = message;
    errorDiv.style.color = 'red';
    errorDiv.className = 'error-message';
    document.getElementById('calculate-button').insertAdjacentElement('afterend', errorDiv);
}

function clearErrorMessages() {
    const errorMessages = document.querySelectorAll('.error-message');
    errorMessages.forEach(msg => msg.remove());
}
function updateTotalDays() {
    const inputs = document.querySelectorAll('#calendar input[type="number"]');
    let total = 0;
    inputs.forEach(input => {
        total += parseFloat(input.value) || 0;
    });
    document.getElementById('total-days').value = total.toFixed(2);
    let average = total/2;
    document.getElementById('average-days').value = average.toFixed(2);
    // Calculate and update ParentBpct
    const parentBpct = (total / 730) * 100; // Convert to percentage
    document.getElementById('ParentBpct').value = parentBpct.toFixed(2);
}

function resetAllSpinBoxes() {
    const spinBoxes = document.querySelectorAll('#calendar input[type="number"]');
    spinBoxes.forEach(box => {
        box.value = 0;
    });
}
function handlePopulateCalendars() {
    resetAllSpinBoxes();

    const recurringFrequency = document.querySelector('input[name="recurring-frequency"]:checked');
    if (recurringFrequency) {
        const beginDay = document.querySelector('select[name="begin-day"]').value;
        if (recurringFrequency.value === 'every') {
            assignRecurringDaytimePeriods(false, true); // Every week
        } else if (recurringFrequency.value === 'every-other') {
            const everyOtherType = document.querySelector('input[name="every-other-type"]:checked');
            if (everyOtherType) {
                assignRecurringDaytimePeriods(everyOtherType.value === 'even', false); // Alternating weeks
            } else {
                alert('Please select Odd or Even for Every Other weeks.');
            }
        } else if (recurringFrequency.value === 'first-third-recurring') {
            assignRecurringDaytimePeriodsForSpecificWeeks(beginDay, isFirstOrThirdWeek);
        } else if (recurringFrequency.value === 'second-fourth-recurring') {
            assignRecurringDaytimePeriodsForSpecificWeeks(beginDay, isSecondOrFourthWeek);
        }
    }
    var selectedSchedule = document.querySelector('input[name="weekly-schedule"]:checked');
    if (selectedSchedule) {
        var beginDay = document.querySelector('select[name="begin-day"]').value;
        var endDay = document.querySelector('select[name="end-day"]').value;

        if (selectedSchedule.value == 'first-third') {
            assignFirstThirdOccurrences(beginDay, endDay);
        } else if (selectedSchedule.value == 'second-fourth') {
            assignSecondFourthOccurrences(beginDay, endDay);
        } else if (selectedSchedule.value == 'alternating-odd') {
            assignAlternatingOddOccurrences(beginDay, endDay);
        } else if (selectedSchedule.value == 'alternating-even') {
            assignAlternatingEvenOccurrences(beginDay, endDay);
        } else if (selectedSchedule.value == 'every') {
            assignEveryOccurrence(beginDay, endDay);
        }
    }

    // Spring Break - Even Years
    handleBreak('evenSpringBreakStart', 'evenSpringBreakEnd', 'evenSpringBreakParent');

    // Spring Break - Odd Years
    handleBreak('oddSpringBreakStart', 'oddSpringBreakEnd', 'oddSpringBreakParent');

    // Fall Break - Even Years
    handleBreak('evenFallBreakStart', 'evenFallBreakEnd', 'evenFallBreakParent');

    // Fall Break - Odd Years
    handleBreak('oddFallBreakStart', 'oddFallBreakEnd', 'oddFallBreakParent');

    // Thanksgiving Break - Even Years
    handleSplitBreak('evenThanksgivingBreak');

    // Thanksgiving Break - Odd Years
    handleSplitBreak('oddThanksgivingBreak');

    // Christmas Break - Even Years
    handleSplitBreak('evenChristmasBreak');

    // Christmas Break - Odd Years
    handleSplitBreak('oddChristmasBreak');

    // Winter Break - Even Years
    handleBreak('evenWinterBreakStart', 'evenWinterBreakEnd', 'evenWinterBreakParent');

    // Winter Break - Odd Years
    handleBreak('oddWinterBreakStart', 'oddWinterBreakEnd', 'oddWinterBreakParent');

    // Other Break - Even Years
    handleBreak('evenOtherBreakStart', 'evenOtherBreakEnd', 'evenOtherBreakParent');

    // Other Break - Odd Years
    handleBreak('oddOtherBreakStart', 'oddOtherBreakEnd', 'oddOtherBreakParent');

    // Holiday Break
    handleHolidaySchedule();

    // Summer Break
    handleSummerSchedule();

document.querySelectorAll('#calendar input[type="number"]').forEach(input => updateCellBackground(input));
}
function assignEveryOccurrence(beginDay, endDay) {
    const beginDayIndex = getDayIndex(beginDay);
    const endDayIndex = getDayIndex(endDay);
    const calendarInputs = document.querySelectorAll('#calendar input[type="number"]');
    
    calendarInputs.forEach(input => {
        const date = new Date(input.id.split('-').slice(1).join('-'));
        if (date.getDay() === beginDayIndex) {
            updateConsecutiveDays(date, beginDayIndex, endDayIndex);
        }
    });
}
function assignAlternatingEvenOccurrences(beginDay, endDay) {
    const beginDayIndex = getDayIndex(beginDay);
    const endDayIndex = getDayIndex(endDay);
    const calendarInputs = document.querySelectorAll('#calendar input[type="number"]');
    
    let isEvenWeek = false;
    
    calendarInputs.forEach(input => {
        const date = new Date(input.id.split('-').slice(1).join('-'));
        if (date.getDay() === beginDayIndex && isEvenWeek) {
            updateConsecutiveDays(date, beginDayIndex, endDayIndex);
        }
        if (date.getDay() === beginDayIndex) {
            isEvenWeek = !isEvenWeek;
        }
    });
}
function assignAlternatingOddOccurrences(beginDay, endDay) {
    const beginDayIndex = getDayIndex(beginDay);
    const endDayIndex = getDayIndex(endDay);
    const calendarInputs = document.querySelectorAll('#calendar input[type="number"]');
    
    let isOddWeek = true;
    
    calendarInputs.forEach(input => {

const dateParts = input.id.split('-').slice(1);
const year = parseInt(dateParts[0], 10);
const month = parseInt(dateParts[1], 10) - 1; // JavaScript months are 0-indexed
const day = parseInt(dateParts[2], 10);
const date = new Date(year, month, day);

        if (date.getDay() === beginDayIndex && isOddWeek) {
            updateConsecutiveDays(date, beginDayIndex, endDayIndex);
        }
        if (date.getDay() === beginDayIndex) {
            isOddWeek = !isOddWeek;
        }
    });
}
function assignFirstThirdOccurrences(beginDay, endDay) {
    const beginDayIndex = getDayIndex(beginDay);
    const endDayIndex = getDayIndex(endDay);
    const calendarInputs = document.querySelectorAll('#calendar input[type="number"]');

    calendarInputs.forEach(input => {
        const date = new Date(input.id.split('-').slice(1).join('-'));
        if (isFirstOrThirdOccurrence(date, beginDayIndex)) {
            updateConsecutiveDays(date, beginDayIndex, endDayIndex);
        }
    });
}
function isFirstOrThirdOccurrence(date, beginDayIndex) {
    const day = date.getDay();
    const dateOfMonth = date.getDate();

    if (day !== beginDayIndex) return false;

    const firstOccurrence = new Date(date.getFullYear(), date.getMonth(), 1);

    // Find the first occurrence
    while (firstOccurrence.getDay() !== beginDayIndex) {
        firstOccurrence.setDate(firstOccurrence.getDate() + 1);
    }

    const thirdOccurrence = new Date(firstOccurrence);
    thirdOccurrence.setDate(thirdOccurrence.getDate() + 14);

    return (dateOfMonth === firstOccurrence.getDate() || dateOfMonth === thirdOccurrence.getDate());
}
function assignSecondFourthOccurrences(beginDay, endDay) {
    const beginDayIndex = getDayIndex(beginDay);
    const endDayIndex = getDayIndex(endDay);
    const calendarInputs = document.querySelectorAll('#calendar input[type="number"]');

    calendarInputs.forEach(input => {
        const date = new Date(input.id.split('-').slice(1).join('-'));
        if (isSecondOrFourthOccurrence(date, beginDayIndex)) {
            updateConsecutiveDays(date, beginDayIndex, endDayIndex);
        }
    });
}
function isSecondOrFourthOccurrence(date, beginDayIndex) {
    const day = date.getDay();
    const dateOfMonth = date.getDate();

    if (day !== beginDayIndex) return false;

    const secondOccurrence = new Date(date.getFullYear(), date.getMonth(), 1);

    // Find the second occurrence
    while (secondOccurrence.getDay() !== beginDayIndex) {
        secondOccurrence.setDate(secondOccurrence.getDate() + 1);
    }
    secondOccurrence.setDate(secondOccurrence.getDate() + 7);

    const fourthOccurrence = new Date(secondOccurrence);
    fourthOccurrence.setDate(fourthOccurrence.getDate() + 14);

    return (dateOfMonth === secondOccurrence.getDate() || dateOfMonth === fourthOccurrence.getDate());
}
function updateConsecutiveDays(startDate, beginDayIndex, endDayIndex) {
    let currentDate = new Date(startDate);
    const endDate = new Date(startDate);

    // Calculate the end date based on the end day index
    const dayDiff = (endDayIndex - beginDayIndex + 7) % 7;
    endDate.setDate(startDate.getDate() + dayDiff);

    // Handle the case where begin-day and end-day are the same
    const daysToUpdate = beginDayIndex === endDayIndex ? 7 : dayDiff;

    for (let i = 0; i < daysToUpdate; i++) {
        const year = currentDate.getFullYear();
    const month = padToTwoDigits(currentDate.getMonth() + 1);
    const day = padToTwoDigits(currentDate.getDate());

        const input = document.getElementById(`day-${year}-${month}-${day}`);
        if (input) {
            input.value = 1;
        }

        currentDate.setDate(currentDate.getDate() + 1);
    }
}

function padToTwoDigits(num) {
    return num.toString().padStart(2, '0');
}
function handleSplitBreak(breakId) {
    const parentSelection = document.querySelector(`input[name="${breakId}Parent"]:checked`);
    
    if (parentSelection && parentSelection.value === 'Split') {
        const firstSplitParent = document.querySelector(`input[name="${breakId}ParentFirstSplit"]:checked`);
        const startDate = document.getElementById(`${breakId}Start`).value;
        const exchangeDate = document.getElementById(`${breakId}Exchange`).value;
        const endDate = document.getElementById(`${breakId}End`).value;

        if (firstSplitParent) {
            if (firstSplitParent.value === 'A') {
                assignDateRange(startDate, exchangeDate, 0);
                assignDateRange(exchangeDate, endDate, 1);
            } else {
                assignDateRange(startDate, exchangeDate, 1);
                assignDateRange(exchangeDate, endDate, 0);
            }
        }
    } else {
        handleBreak(`${breakId}Start`, `${breakId}End`, `${breakId}Parent`);
    }
}

function populateHolidayDates(county) {
    const holidays = [
        { name: 'MLK', month: 0, dayOfWeek: 1, weekOfMonth: 3 },
        { name: 'Presidents', month: 1, dayOfWeek: 1, weekOfMonth: 3 },
        { name: 'Easter', month: -1, dayOfWeek: 0, weekOfMonth: 0 }, // Special case
        { name: 'Mothers', month: 4, dayOfWeek: 0, weekOfMonth: 2 },
        { name: 'Memorial', month: 4, dayOfWeek: 1, weekOfMonth: -1 },
        { name: 'Fathers', month: 5, dayOfWeek: 0, weekOfMonth: 3 },
        { name: 'July4', month: 6, day: 4 }, // Fixed date
        { name: 'Labor', month: 8, dayOfWeek: 1, weekOfMonth: 1 },
        { name: 'Halloween', month: 9, day: 31 }, // Fixed date
        { name: 'Veterans', month: 10, day: 11 } // Fixed date
    ];

    const today = new Date();
    
    holidays.forEach(holiday => {
        let nextDate = findNextHolidayDate(holiday, today);
        updateHolidayInput(holiday.name, nextDate);
        
        // Find the date for the following year
        let followingDate = findNextHolidayDate(holiday, new Date(nextDate.getFullYear() + 1, 0, 1));
        updateHolidayInput(holiday.name, followingDate);
    });

    setSpringBreakDates(today, county);
    setFallBreakDates(today, county);
    setThanksgivingBreakDates(today, county);
    setChristmasBreakDates(today, county);
    setWinterBreakDates(today, county);
}

function findFirstAprilAfterToday(today) {
    const year = today.getMonth() > 3 ? today.getFullYear() + 1 : today.getFullYear();
    return new Date(year, 3, 1); // April is month 3 (0-indexed)
}

function setSpringBreakDates(today, county) {
    const currentYear = today.getFullYear();
    let targetYear = currentYear;
    if (today > new Date(currentYear, 3, 15)) { // If it's past mid-April
        targetYear++; // Move to next year
    }

    // Calculate for both even and odd years
    const evenYear = targetYear + (targetYear % 2);
    const oddYear = evenYear - 1;

    if (county === 'gwinnett') {
        // Gwinnett County Spring Break dates
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'fulton') {
        // Fulton County Spring Break dates (same as Gwinnett)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'cobb') {
        // Cobb County Spring Break dates (same as Gwinnett)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'forsyth') {
        // Forsyth County Spring Break dates
        if (evenYear === 2025) {
            // Spring break in 2025 begins the Friday before the first day in April and ends the Sunday after the first day in April
            const evenFirstDayApril = new Date(2025, 3, 1);
            const evenFridayBefore = new Date(evenFirstDayApril);
            evenFridayBefore.setDate(evenFirstDayApril.getDate() - 3);
            const evenSundayAfter = new Date(evenFirstDayApril);
            evenSundayAfter.setDate(evenFirstDayApril.getDate() + 6);

            document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        } else {
            // All other years
            const evenFirstMonday = getFirstMondayInApril(evenYear);
            const evenFridayBefore = new Date(evenFirstMonday);
            evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
            const evenSundayAfter = new Date(evenFirstMonday);
            evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

            document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        }

        // Repeat for odd years
        if (oddYear === 2025) {
            const oddFirstDayApril = new Date(2025, 3, 1);
            const oddFridayBefore = new Date(oddFirstDayApril);
            oddFridayBefore.setDate(oddFirstDayApril.getDate() - 3);
            const oddSundayAfter = new Date(oddFirstDayApril);
            oddSundayAfter.setDate(oddFirstDayApril.getDate() + 6);

            document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
        } else {
            const oddFirstMonday = getFirstMondayInApril(oddYear);
            const oddFridayBefore = new Date(oddFirstMonday);
            oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
            const oddSundayAfter = new Date(oddFirstMonday);
            oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

            document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
        }
    } else if (county === 'dekalb') {
        // Dekalb County Spring Break dates (same as Cobb)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'hall') {
        // Hall County Spring Break dates (same as Gwinnett)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'bibb') {
        // Bibb County Spring Break dates
        // Begins the Friday before April 1st and ends the Sunday after April 1st
        const evenAprilFirst = new Date(evenYear, 3, 1);
        const evenFridayBefore = new Date(evenAprilFirst);
        evenFridayBefore.setDate(evenAprilFirst.getDate() - 3);
        const evenSundayAfter = new Date(evenAprilFirst);
        evenSundayAfter.setDate(evenAprilFirst.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        const oddAprilFirst = new Date(oddYear, 3, 1);
        const oddFridayBefore = new Date(oddAprilFirst);
        oddFridayBefore.setDate(oddAprilFirst.getDate() - 3);
        const oddSundayAfter = new Date(oddAprilFirst);
        oddSundayAfter.setDate(oddAprilFirst.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'newton') {
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'walton') {
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'rockdale') {
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
     } else if (county === 'barrow') {
        // Barrow County Spring Break dates (same as Gwinnett)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    } else if (county === 'jackson') {
        // Jackson County Spring Break dates (same as Gwinnett)
        // Set even year
        const evenFirstMonday = getFirstMondayInApril(evenYear);
        const evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        document.getElementById('evenSpringBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenSpringBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Set odd year
        const oddFirstMonday = getFirstMondayInApril(oddYear);
        const oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('oddSpringBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddSpringBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
    }
}



function getFirstMondayInApril(year) {
    const april1 = new Date(year, 3, 1); // April is month 3 (0-indexed)
    const dayOfWeek = april1.getDay();
    const daysUntilMonday = (8 - dayOfWeek) % 7; // 0 if it's already Monday
    return new Date(year, 3, 1 + daysUntilMonday);
}

function setFallBreakDates(today, county) {
    const currentYear = today.getFullYear();
    let nextEvenYear = currentYear + (currentYear % 2);
    let nextOddYear = currentYear + (currentYear % 2 ? 0 : 1);

    // Gwinnett County
    if (county === 'gwinnett') {
        // Gwinnett County Fall Break dates
        // Begins on the second Thursday in October and ends the following Monday
        let evenSecondThursday = getSecondThursdayInOctober(nextEvenYear);
        let evenMondayAfter = new Date(evenSecondThursday);
        evenMondayAfter.setDate(evenSecondThursday.getDate() + 4);

        let oddSecondThursday = getSecondThursdayInOctober(nextOddYear);
        let oddMondayAfter = new Date(oddSecondThursday);
        oddMondayAfter.setDate(oddSecondThursday.getDate() + 4);

        document.getElementById('evenFallBreakStart').value = evenSecondThursday.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenMondayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddSecondThursday.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddMondayAfter.toISOString().split('T')[0];

    } else if (county === 'fulton') {
        // Fulton County Fall Break dates
        // Begins the Friday before the second Monday in October and ends the following Sunday
        let evenSecondMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 2);
        let evenFridayBefore = new Date(evenSecondMonday);
        evenFridayBefore.setDate(evenSecondMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenSecondMonday);
        evenSundayAfter.setDate(evenSecondMonday.getDate() + 6);

        let oddSecondMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 2);
        let oddFridayBefore = new Date(oddSecondMonday);
        oddFridayBefore.setDate(oddSecondMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddSecondMonday);
        oddSundayAfter.setDate(oddSecondMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'cobb') {
        // Cobb County Fall Break dates
        // Begins the Friday before the fourth Monday in September and ends the Sunday after the fourth Monday in September
        let evenFourthMonday = getNthWeekdayOfMonth(nextEvenYear, 8, 1, 4); // September is month 8
        let evenFridayBefore = new Date(evenFourthMonday);
        evenFridayBefore.setDate(evenFourthMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFourthMonday);
        evenSundayAfter.setDate(evenFourthMonday.getDate() + 6);

        let oddFourthMonday = getNthWeekdayOfMonth(nextOddYear, 8, 1, 4);
        let oddFridayBefore = new Date(oddFourthMonday);
        oddFridayBefore.setDate(oddFourthMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFourthMonday);
        oddSundayAfter.setDate(oddFourthMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'dekalb') {
        // Dekalb County Fall Break dates (same as Fulton)
        // Begins the Friday before the second Monday in October and ends the following Sunday
        let evenSecondMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 2);
        let evenFridayBefore = new Date(evenSecondMonday);
        evenFridayBefore.setDate(evenSecondMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenSecondMonday);
        evenSundayAfter.setDate(evenSecondMonday.getDate() + 6);

        let oddSecondMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 2);
        let oddFridayBefore = new Date(oddSecondMonday);
        oddFridayBefore.setDate(oddSecondMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddSecondMonday);
        oddSundayAfter.setDate(oddSecondMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'forsyth') {
        // Forsyth County Fall Break dates (same as Cobb)
        // Begins the Friday before the fourth Monday in September and ends the Sunday after the fourth Monday in September
        let evenFourthMonday = getNthWeekdayOfMonth(nextEvenYear, 8, 1, 4); // September is month 8
        let evenFridayBefore = new Date(evenFourthMonday);
        evenFridayBefore.setDate(evenFourthMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFourthMonday);
        evenSundayAfter.setDate(evenFourthMonday.getDate() + 6);

        let oddFourthMonday = getNthWeekdayOfMonth(nextOddYear, 8, 1, 4);
        let oddFridayBefore = new Date(oddFourthMonday);
        oddFridayBefore.setDate(oddFourthMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFourthMonday);
        oddSundayAfter.setDate(oddFourthMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'hall') {
        // Hall County Fall Break dates
        // Begins the Friday before the second Monday in October and ends the Wednesday after the first Monday in October
        let evenSecondMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 2);
        let evenFirstMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 1);
        let evenFridayBefore = new Date(evenSecondMonday);
        evenFridayBefore.setDate(evenSecondMonday.getDate() - 3);
        let evenWednesdayAfterFirstMonday = new Date(evenFirstMonday);
        evenWednesdayAfterFirstMonday.setDate(evenFirstMonday.getDate() + 2);

        let oddSecondMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 2);
        let oddFirstMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 1);
        let oddFridayBefore = new Date(oddSecondMonday);
        oddFridayBefore.setDate(oddSecondMonday.getDate() - 3);
        let oddWednesdayAfterFirstMonday = new Date(oddFirstMonday);
        oddWednesdayAfterFirstMonday.setDate(oddFirstMonday.getDate() + 2);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenWednesdayAfterFirstMonday.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddWednesdayAfterFirstMonday.toISOString().split('T')[0];

    } else if (county === 'bibb') {
        // Bibb County Fall Break dates
        // Begins the Friday before the first Monday in October and ends the Sunday after the first Monday in October
        let evenFirstMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 1);
        let evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        let oddFirstMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 1);
        let oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'newton') {
        // Newton County Fall Break dates (same as Bibb)
        // Begins the Friday before the first Monday in October and ends the Sunday after the first Monday in October
        let evenFirstMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 1);
        let evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        let oddFirstMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 1);
        let oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'walton') {
        // Walton County Fall Break dates (same as Dekalb)
        // Begins the Friday before the second Monday in October and ends the following Sunday
        let evenSecondMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 2);
        let evenFridayBefore = new Date(evenSecondMonday);
        evenFridayBefore.setDate(evenSecondMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenSecondMonday);
        evenSundayAfter.setDate(evenSecondMonday.getDate() + 6);

        let oddSecondMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 2);
        let oddFridayBefore = new Date(oddSecondMonday);
        oddFridayBefore.setDate(oddSecondMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddSecondMonday);
        oddSundayAfter.setDate(oddSecondMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'rockdale') {
        // Rockdale County Fall Break dates (same as Bibb)
        // Begins the Friday before the first Monday in October and ends the Sunday after the first Monday in October
        let evenFirstMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 1);
        let evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        let oddFirstMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 1);
        let oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'barrow') {
        // Barrow County Fall Break dates (same as Bibb)
        // Begins the Friday before the first Monday in October and ends the Sunday after the first Monday in October
        let evenFirstMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 1);
        let evenFridayBefore = new Date(evenFirstMonday);
        evenFridayBefore.setDate(evenFirstMonday.getDate() - 3);
        let evenSundayAfter = new Date(evenFirstMonday);
        evenSundayAfter.setDate(evenFirstMonday.getDate() + 6);

        let oddFirstMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 1);
        let oddFridayBefore = new Date(oddFirstMonday);
        oddFridayBefore.setDate(oddFirstMonday.getDate() - 3);
        let oddSundayAfter = new Date(oddFirstMonday);
        oddSundayAfter.setDate(oddFirstMonday.getDate() + 6);

        document.getElementById('evenFallBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'jackson') {
        // Jackson County Fall Break dates
        // Begins the Wednesday before the second Monday in October and ends the Tuesday after the second Monday in October
        let evenSecondMonday = getNthWeekdayOfMonth(nextEvenYear, 9, 1, 2);
        let evenWednesdayBefore = new Date(evenSecondMonday);
        evenWednesdayBefore.setDate(evenSecondMonday.getDate() - 5); // Wednesday before
        let evenTuesdayAfter = new Date(evenSecondMonday);
        evenTuesdayAfter.setDate(evenSecondMonday.getDate() + 8); // Tuesday after

        let oddSecondMonday = getNthWeekdayOfMonth(nextOddYear, 9, 1, 2);
        let oddWednesdayBefore = new Date(oddSecondMonday);
        oddWednesdayBefore.setDate(oddSecondMonday.getDate() - 5);
        let oddTuesdayAfter = new Date(oddSecondMonday);
        oddTuesdayAfter.setDate(oddSecondMonday.getDate() + 8);

        document.getElementById('evenFallBreakStart').value = evenWednesdayBefore.toISOString().split('T')[0];
        document.getElementById('evenFallBreakEnd').value = evenTuesdayAfter.toISOString().split('T')[0];
        document.getElementById('oddFallBreakStart').value = oddWednesdayBefore.toISOString().split('T')[0];
        document.getElementById('oddFallBreakEnd').value = oddTuesdayAfter.toISOString().split('T')[0];

    }
}



function getSecondThursdayInOctober(year) {
    const firstOctober = new Date(year, 9, 1);
    const dayOfWeek = firstOctober.getDay();
    const daysUntilFirstThursday = (4 - dayOfWeek + 7) % 7;
    const secondThursday = new Date(year, 9, 1 + daysUntilFirstThursday + 7);
    return secondThursday;
}
function getNthWeekdayOfMonth(year, month, weekday, n) {
    const firstOfMonth = new Date(year, month, 1);
    let dayOfWeek = firstOfMonth.getDay();
    let dayOffset = (weekday - dayOfWeek + 7) % 7;
    let day = 1 + dayOffset + 7 * (n - 1);
    return new Date(year, month, day);
}
    function setThanksgivingBreakDates(today, county) {
        const currentYear = today.getFullYear();

        // Calculate the next even and odd years that are not in the past
        let evenYear = currentYear + (currentYear % 2 === 0 ? 0 : 1);
        let oddYear = currentYear + (currentYear % 2 === 1 ? 0 : 1);

        // Adjust evenYear if its Thanksgiving is in the past
        let evenThanksgiving = getLastThursdayInNovember(evenYear);
        if (evenThanksgiving < today) {
            evenYear += 2;
            evenThanksgiving = getLastThursdayInNovember(evenYear);
        }

        // Adjust oddYear if its Thanksgiving is in the past
        let oddThanksgiving = getLastThursdayInNovember(oddYear);
        if (oddThanksgiving < today) {
            oddYear += 2;
            oddThanksgiving = getLastThursdayInNovember(oddYear);
        }

        // Gwinnett County
        if (county === 'gwinnett') {
            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'fulton') {
            // Fulton County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'cobb') {
            // Cobb County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'dekalb') {
            // Dekalb County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'forsyth') {
            // Forsyth County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'hall') {
            // Hall County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'bibb') {
            // Bibb County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'newton') {
            // Newton County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'walton') {
            // Walton County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'rockdale') {
            // Rockdale County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'barrow') {
            // Barrow County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];

        } else if (county === 'jackson') {
            // Jackson County Thanksgiving Break dates

            // Even Year
            const evenFridayBefore = new Date(evenThanksgiving);
            evenFridayBefore.setDate(evenThanksgiving.getDate() - 6);
            const evenSundayAfter = new Date(evenThanksgiving);
            evenSundayAfter.setDate(evenThanksgiving.getDate() + 3);
            const evenExchangeDate = new Date(evenFridayBefore);
            evenExchangeDate.setDate(evenFridayBefore.getDate() + 5);

            document.getElementById('evenThanksgivingBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];
            document.getElementById('evenThanksgivingBreakExchange').value = evenExchangeDate.toISOString().split('T')[0];

            // Odd Year
            const oddFridayBefore = new Date(oddThanksgiving);
            oddFridayBefore.setDate(oddThanksgiving.getDate() - 6);
            const oddSundayAfter = new Date(oddThanksgiving);
            oddSundayAfter.setDate(oddThanksgiving.getDate() + 3);
            const oddExchangeDate = new Date(oddFridayBefore);
            oddExchangeDate.setDate(oddFridayBefore.getDate() + 5);

            document.getElementById('oddThanksgivingBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];
            document.getElementById('oddThanksgivingBreakExchange').value = oddExchangeDate.toISOString().split('T')[0];
        }
    }

    function getLastThursdayInNovember(year) {
        // November is month 10
        const lastDayOfNovember = new Date(year, 10, 30); // November 30
        let lastThursday = new Date(lastDayOfNovember);
        while (lastThursday.getDay() !== 4) { // 4 represents Thursday
            lastThursday.setDate(lastThursday.getDate() - 1);
        }
        return lastThursday;
    }

function getLastThursdayInNovember(year) {
    const lastNovember = new Date(year, 10, 30);
    const dayOfWeek = lastNovember.getDay();
    const lastThursday = dayOfWeek === 4 ? 30 : 30 - (dayOfWeek + 3) % 7;
    return new Date(year, 10, lastThursday); // Last Thursday in November
}

function setChristmasBreakDates(today, county) {
    const currentYear = today.getFullYear();
    const nextYear = currentYear + 1;

    if (county === 'barrow') {
        // Barrow County Christmas Break dates
        // Begins the Friday before Christmas and ends on January 5th
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const endDate = new Date(currentYear + 1, 0, 5); // January 5th

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const endDateNextYear = new Date(nextYear + 1, 0, 5); // January 5th

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'bibb') {
        // Bibb County Christmas Break dates (same as Fulton)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstMondayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstMondayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'cobb') {
        // Cobb County Christmas Break dates (same as Gwinnett)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstSundayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstSundayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'dekalb') {
        // Dekalb County Christmas Break dates (same as Fulton)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstMondayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstMondayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'forsyth') {
        // Forsyth County Christmas Break dates (same as Gwinnett)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstSundayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstSundayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'fulton') {
        // Fulton County Christmas Break dates
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstMondayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstMondayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'gwinnett') {
        // Gwinnett County Christmas Break dates
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstSundayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstSundayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'hall') {
        // Hall County Christmas Break dates (same as Fulton)
        // Implemented with full logic
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstMondayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstMondayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'jackson') {
        // Jackson County Christmas Break dates (same as Gwinnett)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstSundayAfterNewYear(currentYear + 1);

        if (currentYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmas.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDate.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDate.toISOString().split('T')[0];
        }

        // Repeat for next year
        const fridayBeforeChristmasNextYear = getFridayBeforeChristmas(nextYear);
        const exchangeDateNextYear = new Date(nextYear, 11, 26);
        const endDateNextYear = getFirstSundayAfterNewYear(nextYear + 1);

        if (nextYear % 2 === 0) {
            document.getElementById('evenChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('evenChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        } else {
            document.getElementById('oddChristmasBreakStart').value = fridayBeforeChristmasNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakEnd').value = endDateNextYear.toISOString().split('T')[0];
            document.getElementById('oddChristmasBreakExchange').value = exchangeDateNextYear.toISOString().split('T')[0];
        }

    } else if (county === 'newton') {
        // Newton County Christmas Break dates (same as Fulton)
        const fridayBeforeChristmas = getFridayBeforeChristmas(currentYear);
        const exchangeDate = new Date(currentYear, 11, 26);
        const endDate = getFirstMondayAfterNewYear(currentYear + 1);

        // The rest of the code is the same as the Fulton logic, written out fully
        // [Include the full code as above]

    } else if (county === 'rockdale') {
        // Rockdale County Christmas Break dates (same as Fulton)
        // [Include the full code as above]

    } else if (county === 'walton') {
        // Walton County Christmas Break dates (same as Gwinnett)
        // [Include the full code as above]

    }
}


function getFridayBeforeChristmas(year) {
    const christmas = new Date(year, 11, 25); // December 25th
    const dayOfWeek = christmas.getDay();
    let daysBack = (dayOfWeek + 2) % 7 + 1; // Number of days to subtract to get to Friday
    return new Date(year, 11, 25 - daysBack);
}

function getFirstSundayAfterNewYear(year) {
    const newYear = new Date(year, 0, 1); // January 1st of the given year
    const dayOfWeek = newYear.getDay();
    const daysUntilSunday = (7 - dayOfWeek) % 7;
    return new Date(year, 0, 1 + daysUntilSunday);
}

function getFirstMondayAfterNewYear(year) {
    const newYear = new Date(year, 0, 1); // January 1st
    const dayOfWeek = newYear.getDay();
    const daysUntilMonday = (8 - dayOfWeek) % 7;
    return new Date(year, 0, 1 + daysUntilMonday);
}


function setWinterBreakDates(today, county) {
    let targetYear = today.getFullYear();
    const currentMonth = today.getMonth(); // 0-indexed (January is 0)

    // If it's past February, increment the target year
    if (currentMonth > 1 || (currentMonth === 1 && today.getDate() > 28)) {
        targetYear++;
    }

    const evenYear = targetYear + (targetYear % 2);
    const oddYear = evenYear - 1;

    // **Gwinnett County**
    if (county === 'gwinnett') {
        // Gwinnett County Winter Break dates
        // Begins the Friday before the second-to-last Monday in February and ends the following Sunday

        // Even Year
        const evenSecondToLastMonday = getSecondToLastMondayInFebruary(evenYear);
        const evenFridayBefore = new Date(evenSecondToLastMonday);
        evenFridayBefore.setDate(evenSecondToLastMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenSecondToLastMonday);
        evenSundayAfter.setDate(evenSecondToLastMonday.getDate() + 6);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddSecondToLastMonday = getSecondToLastMondayInFebruary(oddYear);
        const oddFridayBefore = new Date(oddSecondToLastMonday);
        oddFridayBefore.setDate(oddSecondToLastMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddSecondToLastMonday);
        oddSundayAfter.setDate(oddSecondToLastMonday.getDate() + 6);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'fulton') {
        // **Fulton County**
        // Winter Break begins the Friday before the third Monday in February and ends the following Tuesday

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3); // February is month 1
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenTuesdayAfter = new Date(evenThirdMonday);
        evenTuesdayAfter.setDate(evenThirdMonday.getDate() + 7);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenTuesdayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddTuesdayAfter = new Date(oddThirdMonday);
        oddTuesdayAfter.setDate(oddThirdMonday.getDate() + 7);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddTuesdayAfter.toISOString().split('T')[0];

    } else if (county === 'cobb') {
        // **Cobb County**
        // Winter break begins the Friday before the third Monday in February and ends the Sunday after the third Monday in February

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenThirdMonday);
        evenSundayAfter.setDate(evenThirdMonday.getDate() + 6);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddThirdMonday);
        oddSundayAfter.setDate(oddThirdMonday.getDate() + 6);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'dekalb') {
        // **Dekalb County**
        // Winter Break is the same as Cobb County

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenThirdMonday);
        evenSundayAfter.setDate(evenThirdMonday.getDate() + 6);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddThirdMonday);
        oddSundayAfter.setDate(oddThirdMonday.getDate() + 6);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'forsyth') {
        // **Forsyth County**
        // Winter Break is the same as Cobb County

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenThirdMonday);
        evenSundayAfter.setDate(evenThirdMonday.getDate() + 6);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddThirdMonday);
        oddSundayAfter.setDate(oddThirdMonday.getDate() + 6);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'hall') {
        // **Hall County**
        // Winter Break begins February 13 and ends the Tuesday after February 13

        // Even Year
        const evenStart = new Date(evenYear, 1, 13);
        const evenEnd = new Date(evenYear, 1, 13 + 7); // Tuesday after February 13

        document.getElementById('evenWinterBreakStart').value = evenStart.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenEnd.toISOString().split('T')[0];

        // Odd Year
        const oddStart = new Date(oddYear, 1, 13);
        const oddEnd = new Date(oddYear, 1, 13 + 7);

        document.getElementById('oddWinterBreakStart').value = oddStart.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddEnd.toISOString().split('T')[0];

    } else if (county === 'bibb') {
        // **Bibb County**
        // Winter Break is the same as Fulton County

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenTuesdayAfter = new Date(evenThirdMonday);
        evenTuesdayAfter.setDate(evenThirdMonday.getDate() + 7);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenTuesdayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddTuesdayAfter = new Date(oddThirdMonday);
        oddTuesdayAfter.setDate(oddThirdMonday.getDate() + 7);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddTuesdayAfter.toISOString().split('T')[0];

    } else if (county === 'newton') {
        // **Newton County**
        // Winter Break is the same as Dekalb County

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenSundayAfter = new Date(evenThirdMonday);
        evenSundayAfter.setDate(evenThirdMonday.getDate() + 6);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenSundayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddSundayAfter = new Date(oddThirdMonday);
        oddSundayAfter.setDate(oddThirdMonday.getDate() + 6);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddSundayAfter.toISOString().split('T')[0];

    } else if (county === 'walton') {
        // **Walton County**
        // Winter Break is the same as Fulton County

        // Even Year
        const evenThirdMonday = getNthWeekdayOfMonth(evenYear, 1, 1, 3);
        const evenFridayBefore = new Date(evenThirdMonday);
        evenFridayBefore.setDate(evenThirdMonday.getDate() - 3);
        const evenTuesdayAfter = new Date(evenThirdMonday);
        evenTuesdayAfter.setDate(evenThirdMonday.getDate() + 7);

        document.getElementById('evenWinterBreakStart').value = evenFridayBefore.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenTuesdayAfter.toISOString().split('T')[0];

        // Odd Year
        const oddThirdMonday = getNthWeekdayOfMonth(oddYear, 1, 1, 3);
        const oddFridayBefore = new Date(oddThirdMonday);
        oddFridayBefore.setDate(oddThirdMonday.getDate() - 3);
        const oddTuesdayAfter = new Date(oddThirdMonday);
        oddTuesdayAfter.setDate(oddThirdMonday.getDate() + 7);

        document.getElementById('oddWinterBreakStart').value = oddFridayBefore.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddTuesdayAfter.toISOString().split('T')[0];

    } else if (county === 'rockdale') {
        // **Rockdale County**
        // Winter break begins on February 14th if it falls on a Friday, else it begins the Friday before February 14th
        // Ends 9 days after it begins

        // Even Year
        let evenFeb14 = new Date(evenYear, 1, 14);
        let evenStart = new Date(evenFeb14);
        if (evenFeb14.getDay() !== 5) { // Not Friday
            while (evenStart.getDay() !== 5) {
                evenStart.setDate(evenStart.getDate() - 1);
            }
        }
        let evenEnd = new Date(evenStart);
        evenEnd.setDate(evenStart.getDate() + 9);

        document.getElementById('evenWinterBreakStart').value = evenStart.toISOString().split('T')[0];
        document.getElementById('evenWinterBreakEnd').value = evenEnd.toISOString().split('T')[0];

        // Odd Year
        let oddFeb14 = new Date(oddYear, 1, 14);
        let oddStart = new Date(oddFeb14);
        if (oddFeb14.getDay() !== 5) { // Not Friday
            while (oddStart.getDay() !== 5) {
                oddStart.setDate(oddStart.getDate() - 1);
            }
        }
        let oddEnd = new Date(oddStart);
        oddEnd.setDate(oddStart.getDate() + 9);

        document.getElementById('oddWinterBreakStart').value = oddStart.toISOString().split('T')[0];
        document.getElementById('oddWinterBreakEnd').value = oddEnd.toISOString().split('T')[0];

    } else if (county === 'barrow') {
        // **Barrow County**
        // In 2025, begins February 13 and ends February 17
        // In all future years, begins the Thursday after the second Friday in March and ends three days after it begins

        // Even Year
        if (evenYear === 2025) {
            const evenStart = new Date(2025, 1, 13); // February 13, 2025
            const evenEnd = new Date(2025, 1, 17);   // February 17, 2025

            document.getElementById('evenWinterBreakStart').value = evenStart.toISOString().split('T')[0];
            document.getElementById('evenWinterBreakEnd').value = evenEnd.toISOString().split('T')[0];

        } else {
            const evenSecondFriday = getNthWeekdayOfMonth(evenYear, 2, 5, 2); // March is month 2, Friday is day 5
            const evenThursdayAfter = new Date(evenSecondFriday);
            evenThursdayAfter.setDate(evenSecondFriday.getDate() + 6); // Thursday after second Friday
            const evenEnd = new Date(evenThursdayAfter);
            evenEnd.setDate(evenThursdayAfter.getDate() + 3);

            document.getElementById('evenWinterBreakStart').value = evenThursdayAfter.toISOString().split('T')[0];
            document.getElementById('evenWinterBreakEnd').value = evenEnd.toISOString().split('T')[0];
        }

        // Odd Year
        if (oddYear === 2025) {
            const oddStart = new Date(2025, 1, 13);
            const oddEnd = new Date(2025, 1, 17);

            document.getElementById('oddWinterBreakStart').value = oddStart.toISOString().split('T')[0];
            document.getElementById('oddWinterBreakEnd').value = oddEnd.toISOString().split('T')[0];

        } else {
            const oddSecondFriday = getNthWeekdayOfMonth(oddYear, 2, 5, 2);
            const oddThursdayAfter = new Date(oddSecondFriday);
            oddThursdayAfter.setDate(oddSecondFriday.getDate() + 6);
            const oddEnd = new Date(oddThursdayAfter);
            oddEnd.setDate(oddThursdayAfter.getDate() + 3);

            document.getElementById('oddWinterBreakStart').value = oddThursdayAfter.toISOString().split('T')[0];
            document.getElementById('oddWinterBreakEnd').value = oddEnd.toISOString().split('T')[0];
        }

    } else if (county === 'jackson') {
        // **Jackson County**
        // Winter break begin and end dates are omitted (set to empty)

        document.getElementById('evenWinterBreakStart').value = '';
        document.getElementById('evenWinterBreakEnd').value = '';
        document.getElementById('oddWinterBreakStart').value = '';
        document.getElementById('oddWinterBreakEnd').value = '';
    }
}



function getSecondToLastMondayInFebruary(year) {
    // Find the last day of February
    let lastDayOfFeb = new Date(year, 1, 28);
    if (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0)) {
        lastDayOfFeb = new Date(year, 1, 29); // Leap year
    }

    // Find the last Monday in February
    let dayOfWeek = lastDayOfFeb.getDay();
    let lastMondayDate = lastDayOfFeb.getDate() - ((dayOfWeek + 6) % 7);
    let lastMonday = new Date(year, 1, lastMondayDate);

    // Second to last Monday
    let secondToLastMonday = new Date(lastMonday);
    secondToLastMonday.setDate(lastMonday.getDate() - 7);

    return secondToLastMonday;
}

function findNextHolidayDate(holiday, startDate) {
    let year = startDate.getFullYear();
    let date;

    if (holiday.name === 'Easter') {
        date = calculateEaster(year);
    } else if (holiday.day) { // Fixed date holiday
        date = new Date(year, holiday.month, holiday.day);
    } else {
        date = new Date(year, holiday.month, 1);
        // Move to the first occurrence of the day of the week
        date.setDate(date.getDate() + (holiday.dayOfWeek - date.getDay() + 7) % 7);
        
        // Move to the nth occurrence (week of month)
        if (holiday.weekOfMonth > 0) {
            date.setDate(date.getDate() + 7 * (holiday.weekOfMonth - 1));
        } else {
            // Handle last occurrence of the month
            while (date.getMonth() === holiday.month) {
                date.setDate(date.getDate() + 7);
            }
            date.setDate(date.getDate() - 7);
        }
    }
    
    // If the calculated date is before the start date, move to next year
    if (date < startDate) {
        return findNextHolidayDate(holiday, new Date(year + 1, 0, 1));
    }
    
    return date;
}

function calculateEaster(year) {
    const a = year % 19;
    const b = Math.floor(year / 100);
    const c = year % 100;
    const d = Math.floor(b / 4);
    const e = b % 4;
    const f = Math.floor((b + 8) / 25);
    const g = Math.floor((b - f + 1) / 3);
    const h = (19 * a + b - d - g + 15) % 30;
    const i = Math.floor(c / 4);
    const k = c % 4;
    const l = (32 + 2 * e + 2 * i - h - k) % 7;
    const m = Math.floor((a + 11 * h + 22 * l) / 451);
    const month = Math.floor((h + l - 7 * m + 114) / 31) - 1;
    const day = ((h + l - 7 * m + 114) % 31) + 1;
    return new Date(year, month, day);
}

function updateHolidayInput(holidayName, date) {
    const year = date.getFullYear();
    const isEven = year % 2 === 0;
    const endInputId = `${isEven ? 'even' : 'odd'}End${holidayName}`;
    const beginInputId = `${isEven ? 'even' : 'odd'}Begin${holidayName}`;
    
    const endInput = document.getElementById(endInputId);
    const beginInput = document.getElementById(beginInputId);
    
    if (endInput && beginInput) {
        switch (holidayName) {
            case 'July4':
                beginInput.value = new Date(year, 6, 3).toISOString().split('T')[0];
                endInput.value = new Date(year, 6, 5).toISOString().split('T')[0];
                break;
            case 'Halloween':
                beginInput.value = new Date(year, 9, 31).toISOString().split('T')[0];
                endInput.value = new Date(year, 10, 1).toISOString().split('T')[0];
                break;
            case 'Veterans':
                endInput.value = date.toISOString().split('T')[0];
                const fridayBefore = new Date(date);
                fridayBefore.setDate(date.getDate() - ((date.getDay() + 2) % 7));
                beginInput.value = fridayBefore.toISOString().split('T')[0];
                break;
            case 'Fathers':
                // Set Friday before Father's Day as start
                const fridayBeforeFathersDay = new Date(date);
                fridayBeforeFathersDay.setDate(date.getDate() - 2);
                beginInput.value = fridayBeforeFathersDay.toISOString().split('T')[0];
                // Set Father's Day as end
                endInput.value = date.toISOString().split('T')[0];
                break;

            default:
                if (['MLK', 'Presidents', 'Easter', 'Mothers', 'Memorial', 'Labor'].includes(holidayName)) {
                    endInput.value = date.toISOString().split('T')[0];
                    const fridayBefore = new Date(date);
                    fridayBefore.setDate(date.getDate() - ((date.getDay() + 2) % 7));
                    beginInput.value = fridayBefore.toISOString().split('T')[0];
                } else {
                    // For any other holidays, just set the date as is
                    beginInput.value = date.toISOString().split('T')[0];
                    endInput.value = date.toISOString().split('T')[0];
                }
        }
    }
}
function handleSummerSchedule() {
    const evenYearOption = document.querySelector('input[name="evenSummerSchedule"]:checked').value;
    const oddYearOption = document.querySelector('input[name="oddSummerSchedule"]:checked').value;

    // Handle even year summer schedule
    handleEvenYearSummer(evenYearOption);

    // Handle odd year summer schedule
    handleOddYearSummer(oddYearOption);
}
function handleOddYearSummer(option) {
    const today = new Date();
    const currentYear = today.getFullYear();
    const calendarYears = Math.ceil(25 / 12);

    for (let i = 0; i < calendarYears; i++) {
        const year = currentYear + i;
        if (year % 2 !== 0) { // Check if it's an odd year
            const firstMondayJune = getFirstMondayOfMonth(year, 5); // 5 represents June (0-indexed)

            // Skip if the first Monday of June is before today
            if (firstMondayJune < today) {
                continue;
            }

            switch (option) {
                case 'Omit':
                    // Do nothing
                    break;
                case '1week':
                    updateSummerCalendar(firstMondayJune, 7, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 7, 0, today);
                    break;
                case '2weeks':
                    updateSummerCalendar(firstMondayJune, 14, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 14, 0, today);
                    break;
                case '3weeks':
                    updateSummerCalendar(firstMondayJune, 21, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 21, 0, today);
                    break;
                case '4weeks':
                    updateSummerCalendar(firstMondayJune, 28, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 28, 0, today);
                    break;
                case 'alternating':
                    for (let j = 0; j < 8; j++) {
                        updateSummerCalendar(addDays(firstMondayJune, j * 7), 7, j % 2, today);
                    }
                    break;
                case 'All':
                    const firstSaturdayJune = getFirstSaturdayOfMonth(year, 5);
                    updateSummerCalendar(firstSaturdayJune, 56, 1, today);
                    break;
            }
        }
    }
}
function handleEvenYearSummer(option) {
    const today = new Date();
    const currentYear = today.getFullYear();
    const calendarYears = Math.ceil(25 / 12); // Number of months / 12

    for (let i = 0; i < calendarYears; i++) {
        const year = currentYear + i;
        if (year % 2 === 0) { // Check if it's an even year
            const firstMondayJune = getFirstMondayOfMonth(year, 5); // 5 represents June (0-indexed)

            // Skip if the first Monday of June is before today
            if (firstMondayJune < today) {
                continue;
            }

            switch (option) {
                case 'Omit':
                    // Do nothing
                    break;
                case '1week':
                    updateSummerCalendar(firstMondayJune, 7, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 7, 0, today);
                    break;
                case '2weeks':
                    updateSummerCalendar(firstMondayJune, 14, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 14, 0, today);
                    break;
                case '3weeks':
                    updateSummerCalendar(firstMondayJune, 21, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 21, 0, today);
                    break;
                case '4weeks':
                    updateSummerCalendar(firstMondayJune, 28, 1, today);
                    updateSummerCalendar(addDays(firstMondayJune, 28), 28, 0, today);
                    break;
                case 'alternating':
                    for (let j = 0; j < 8; j++) {
                        updateSummerCalendar(addDays(firstMondayJune, j * 7), 7, j % 2, today);
                    }
                    break;
                case 'All':
                    const firstSaturdayJune = getFirstSaturdayOfMonth(year, 5);
                    updateSummerCalendar(firstSaturdayJune, 56, 1, today);
                    break;
            }
        }
    }
}

function updateSummerCalendar(startDate, days, value, today) {
    for (let i = 0; i < days; i++) {  // Keep this as is to exclude the last day
        const date = addDays(startDate, i);
        if (date < today) {
            continue; // Skip dates before today
        }
        const inputId = `day-${date.getFullYear()}-${padToTwoDigits(date.getMonth() + 1)}-${padToTwoDigits(date.getDate())}`;
        const input = document.getElementById(inputId);
        if (input) {
            input.value = value;
            console.log(`updateSummerCalendar: Set value ${value} for date ${inputId}`);
        } else {
            console.log(`updateSummerCalendar: No input found for date ${inputId}`);
        }
    }
}

function getFirstMondayOfMonth(year, month) {
    const date = new Date(year, month, 1);
    while (date.getDay() !== 1) {
        date.setDate(date.getDate() + 1);
    }
    return date;
}

function getFirstSaturdayOfMonth(year, month) {
    const date = new Date(year, month, 1);
    while (date.getDay() !== 6) {
        date.setDate(date.getDate() + 1);
    }
    return date;
}

function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
}
function handleBreaks(startId, endId, parentId) {
    const start = document.getElementById(startId).value;
    const end = document.getElementById(endId).value;
    const parent = document.querySelector(`input[name="${parentId}"]:checked`).value;

    if (start && end) {
        if (parent === 'B') {
            assignDateRange(start, end, 1);
        } else if (parent === 'A') {
            assignDateRange(start, end, 0);
        }
    }
}
function handleBreak(startId, endId, parentId) {
    const start = document.getElementById(startId).value;
    const end = document.getElementById(endId).value;
    const parentElement = document.querySelector(`input[name="${parentId}"]:checked`);

    if (!start || !end) {
        console.log(`handleBreak: Missing start or end date for ${parentId}`);
        return;
    }

    if (!parentElement) {
        console.log(`handleBreak: No parent selected for ${parentId}`);
        return;
    }

    const parent = parentElement.value;

    console.log(`handleBreak: Processing ${parentId} from ${start} to ${end} for Parent ${parent}`);

    if (parent === 'B') {
        assignDateRange(start, end, 1);
    } else if (parent === 'A') {
        assignDateRange(start, end, 0);
    } else {
        console.log(`handleBreak: Unexpected parent value for ${parentId}: ${parent}`);
    }
}
function handleHolidaySchedule() {
    // MLK Day (even years)
    const mlkEvenSelection = document.querySelector('input[name="mlk-even"]:checked');
    if (mlkEvenSelection && mlkEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginMLK', 'evenEndMLK');
    }

    // Presidents' Day (even years)
    const presidentsEvenSelection = document.querySelector('input[name="presidents-even"]:checked');
    if (presidentsEvenSelection && presidentsEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginPresidents', 'evenEndPresidents');
    }

    // Easter (even years)
    const easterEvenSelection = document.querySelector('input[name="easter-even"]:checked');
    if (easterEvenSelection && easterEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginEaster', 'evenEndEaster');
    }

    // Mother's Day (even years)
    const mothersEvenSelection = document.querySelector('input[name="mothers-day-even"]:checked');
    if (mothersEvenSelection && mothersEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginMothers', 'evenEndMothers');
    }

    // Memorial Day (even years)
    const memorialEvenSelection = document.querySelector('input[name="memorial-day-even"]:checked');
    if (memorialEvenSelection && memorialEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginMemorial', 'evenEndMemorial');
    }

    // Father's Day (even years)
    const fathersEvenSelection = document.querySelector('input[name="fathers-day-even"]:checked');
    if (fathersEvenSelection && fathersEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginFathers', 'evenEndFathers');
    }

    // Juneteenth (even years)
    const juneteenthEvenSelection = document.querySelector('input[name="juneteenth-even"]:checked');
    if (juneteenthEvenSelection && juneteenthEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginJuneteenth', 'evenEndJuneteenth');
    }

    // Fourth of July (even years)
    const julyFourthEvenSelection = document.querySelector('input[name="july-fourth-even"]:checked');
    if (julyFourthEvenSelection && julyFourthEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginJuly4', 'evenEndJuly4');
    }

    // Labor Day (even years)
    const laborEvenSelection = document.querySelector('input[name="labor-day-even"]:checked');
    if (laborEvenSelection && laborEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginLabor', 'evenEndLabor');
    }

    // Halloween (even years)
    const halloweenEvenSelection = document.querySelector('input[name="halloween-even"]:checked');
    if (halloweenEvenSelection && halloweenEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginHalloween', 'evenEndHalloween');
    }

    // Veterans Day (even years)
    const veteransEvenSelection = document.querySelector('input[name="veterans-day-even"]:checked');
    if (veteransEvenSelection && veteransEvenSelection.value === 'parent-b') {
        updateCalendar('evenBeginVeterans', 'evenEndVeterans');
    }

    // MLK Day (odd years)
    const mlkOddSelection = document.querySelector('input[name="mlk-odd"]:checked');
    if (mlkOddSelection && mlkOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginMLK', 'oddEndMLK');
    }

    // Presidents' Day (odd years)
    const presidentsOddSelection = document.querySelector('input[name="presidents-odd"]:checked');
    if (presidentsOddSelection && presidentsOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginPresidents', 'oddEndPresidents');
    }

    // Easter (odd years)
    const easterOddSelection = document.querySelector('input[name="easter-odd"]:checked');
    if (easterOddSelection && easterOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginEaster', 'oddEndEaster');
    }

    // Mother's Day (odd years)
    const mothersOddSelection = document.querySelector('input[name="mothers-day-odd"]:checked');
    if (mothersOddSelection && mothersOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginMothers', 'oddEndMothers');
    }

    // Memorial Day (odd years)
    const memorialOddSelection = document.querySelector('input[name="memorial-day-odd"]:checked');
    if (memorialOddSelection && memorialOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginMemorial', 'oddEndMemorial');
    }

    // Father's Day (odd years)
    const fathersOddSelection = document.querySelector('input[name="fathers-day-odd"]:checked');
    if (fathersOddSelection && fathersOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginFathers', 'oddEndFathers');
    }

    // Juneteenth (odd years)
    const juneteenthOddSelection = document.querySelector('input[name="juneteenth-odd"]:checked');
    if (juneteenthOddSelection && juneteenthOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginJuneteenth', 'oddEndJuneteenth');
    }

    // Fourth of July (odd years)
    const julyFourthOddSelection = document.querySelector('input[name="july-fourth-odd"]:checked');
    if (julyFourthOddSelection && julyFourthOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginJuly4', 'oddEndJuly4');
    }

    // Labor Day (odd years)
    const laborOddSelection = document.querySelector('input[name="labor-day-odd"]:checked');
    if (laborOddSelection && laborOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginLabor', 'oddEndLabor');
    }

    // Halloween (odd years)
    const halloweenOddSelection = document.querySelector('input[name="halloween-odd"]:checked');
    if (halloweenOddSelection && halloweenOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginHalloween', 'oddEndHalloween');
    }

    // Veterans Day (odd years)
    const veteransOddSelection = document.querySelector('input[name="veterans-day-odd"]:checked');
    if (veteransOddSelection && veteransOddSelection.value === 'parent-b') {
        updateCalendar('oddBeginVeterans', 'oddEndVeterans');
    }

 function updateCalendar(beginInputId, endInputId) {
        const beginDate = new Date(document.getElementById(beginInputId).value + 'T00:00:00');
        const endDate = new Date(document.getElementById(endInputId).value + 'T00:00:00');
        
        let currentDate = new Date(beginDate.getFullYear(), beginDate.getMonth(), beginDate.getDate());
        
        while (currentDate < endDate) {
            const year = currentDate.getFullYear();
            const month = padToTwoDigits(currentDate.getMonth() + 1);
            const day = padToTwoDigits(currentDate.getDate());
            
            const input = document.getElementById(`day-${year}-${month}-${day}`);
            if (input) {
                input.value = 1;
            }
            
            currentDate.setDate(currentDate.getDate() + 1);
        }
    }
}
function assignSpecificDate(dateString, value) {
    const dateParts = dateString.split('-');
    const year = parseInt(dateParts[0], 10);
    const month = parseInt(dateParts[1], 10) - 1; // Months are zero-based in JavaScript
    const day = parseInt(dateParts[2], 10);
    const date = new Date(year, month, day);
    const spinBox = document.getElementById(`day-${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`);
    if (spinBox) {
        spinBox.value = value;
    }
}

function assignDateRange(startDateString, endDateString, value) {
    const startDate = new Date(startDateString + 'T00:00:00');  // Set to start of day
    const endDate = new Date(endDateString + 'T00:00:00');  // Set to start of end day

    if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
        console.log(`assignDateRange: Invalid date - Start: ${startDateString}, End: ${endDateString}`);
        return;
    }

    let currentDate = new Date(startDate);
    while (currentDate < endDate) {  // Changed to < instead of <=
        const year = currentDate.getFullYear();
        const month = padToTwoDigits(currentDate.getMonth() + 1);
        const day = padToTwoDigits(currentDate.getDate());
        
        const spinBox = document.getElementById(`day-${year}-${month}-${day}`);
        if (spinBox) {
            spinBox.value = value;
            console.log(`assignDateRange: Set value ${value} for date ${year}-${month}-${day}`);
        } else {
            console.log(`assignDateRange: No spinbox found for date ${year}-${month}-${day}`);
        }
        
        currentDate.setDate(currentDate.getDate() + 1);
    }
}

function assignRecurringDaytimePeriods(isEven, everyWeek) {
    const startDate = new Date();
    const endDate = new Date(startDate.getFullYear() + 2, 11, 31);
    const daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];

    daysOfWeek.forEach(day => {
        const checkbox = document.querySelector(`input[name="recurring-day"][value="${day}"]`);
        if (checkbox && checkbox.checked) {
            const hoursInput = document.querySelector(`input[name="recurring-hours-${day}"]`);
            const hours = hoursInput ? parseFloat(hoursInput.value) : 0;
            if (hours > 0) {
                const dayIndex = getDayIndex(day);
                let tempDate = new Date(startDate);

                if (everyWeek) {
                    while (tempDate <= endDate) {
                        if (tempDate.getDay() === dayIndex) {
                            const spinBox = document.getElementById(`day-${tempDate.getFullYear()}-${padToTwoDigits(tempDate.getMonth() + 1)}-${padToTwoDigits(tempDate.getDate())}`);
                            if (spinBox) {
                                spinBox.value = hours / 24;
                            }
                        }
                        tempDate.setDate(tempDate.getDate() + 1);
                    }
                } else {
                    // Adjust start date if it's for even weeks
                    if (isEven) {
                        const dayAdjustment = (dayIndex >= tempDate.getDay()) ? dayIndex - tempDate.getDay() : 7 - (tempDate.getDay() - dayIndex);
                        tempDate.setDate(tempDate.getDate() + dayAdjustment);
                        if (getWeekNumber(tempDate) % 2 !== 0) {
                            tempDate.setDate(tempDate.getDate() + 7);
                        }
                    } else {
                        const dayAdjustment = (dayIndex >= tempDate.getDay()) ? dayIndex - tempDate.getDay() : 7 - (tempDate.getDay() - dayIndex);
                        tempDate.setDate(tempDate.getDate() + dayAdjustment);
                        if (getWeekNumber(tempDate) % 2 === 0) {
                            tempDate.setDate(tempDate.getDate() + 7);
                        }
                    }

                    while (tempDate <= endDate) {
                        if (tempDate.getDay() === dayIndex) {
                            const spinBox = document.getElementById(`day-${tempDate.getFullYear()}-${padToTwoDigits(tempDate.getMonth() + 1)}-${padToTwoDigits(tempDate.getDate())}`);
                            if (spinBox) {
                                spinBox.value = hours / 24;
                            }
                            tempDate.setDate(tempDate.getDate() + 14); // Move to the same day in the next "every-other" week
                        } else {
                            tempDate.setDate(tempDate.getDate() + 1);
                        }
                    }
                }
            }
        }
    });
}

function assignRecurringDaytimePeriodsForSpecificWeeks(beginDay, weekCheckFunction) {
    const startDate = new Date();
    const endDate = new Date(startDate.getFullYear() + 2, 11, 31);
    const daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];

    daysOfWeek.forEach(day => {
        const checkbox = document.querySelector(`input[name="recurring-day"][value="${day}"]`);
        if (checkbox && checkbox.checked) {
            const hoursInput = document.querySelector(`input[name="recurring-hours-${day}"]`);
            const hours = hoursInput ? parseFloat(hoursInput.value) : 0;
            if (hours > 0) {
                const dayIndex = getDayIndex(day);
                let tempDate = new Date(startDate);

                // Adjust start date based on begin day
                const beginDayIndex = getDayIndex(beginDay);
                if (tempDate.getDay() <= beginDayIndex) {
                    tempDate.setDate(tempDate.getDate() + (beginDayIndex - tempDate.getDay()));
                } else {
                    tempDate.setDate(tempDate.getDate() + (7 - (tempDate.getDay() - beginDayIndex)));
                }

                while (tempDate <= endDate) {
                    if (tempDate.getDay() === dayIndex && weekCheckFunction(tempDate, beginDayIndex)) {
                        const spinBox = document.getElementById(`day-${tempDate.getFullYear()}-${padToTwoDigits(tempDate.getMonth() + 1)}-${padToTwoDigits(tempDate.getDate())}`);
                        if (spinBox) {
                            spinBox.value = hours / 24;
                        }
                    }
                    tempDate.setDate(tempDate.getDate() + 1);
                }
            }
        }
    });
}

function getWeekNumber(date) {
    const startDate = new Date(date.getFullYear(), 0, 1);
    const days = Math.floor((date - startDate) / (24 * 60 * 60 * 1000));
    const weekNumber = Math.ceil((days + startDate.getDay() + 1) / 7);
    return weekNumber;
}

function getDayIndex(day) {
    const daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
    return daysOfWeek.indexOf(day.toLowerCase());
}

function getDayDifference(beginDay, endDay) {
    const beginIndex = getDayIndex(beginDay);
    const endIndex = getDayIndex(endDay);
    return endIndex >= beginIndex ? endIndex - beginIndex : 7 - (beginIndex - endIndex);
}

function generateCalendar() {
    const monthNames = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"];
    const daysOfWeek = ["S", "M", "T", "W", "T", "F", "S"];
    let calendarHtml = '';

    let today;
    if (window.EFFECTIVE_DATE) {
        today = new Date(window.EFFECTIVE_DATE.year, window.EFFECTIVE_DATE.month, window.EFFECTIVE_DATE.day);
    } else {
        today = new Date();
    }
    today.setHours(0, 0, 0, 0); // Set to beginning of the day
    const startMonth = today.getMonth();
    const startYear = today.getFullYear();
    const futureLimit = new Date(today.getTime() + 729 * 24 * 60 * 60 * 1000); // 729 days in the future

    for (let i = 0; i < 25; i++) {
        if (i % 3 === 0) {
            calendarHtml += '<div class="calendar-row">'; // Start a new row
        }

        const monthOffset = i;
        let year = startYear + Math.floor((startMonth + monthOffset) / 12);
        let month = (startMonth + monthOffset) % 12;

        let currentDate = new Date(year, month, 1);
        calendarHtml += `
            <div class="month">
                <div class="month-header">${monthNames[month]} ${year}</div>
                <table>
                    <tr>${daysOfWeek.map(day => `<th>${day}</th>`).join('')}</tr>
        `;

        let firstDay = currentDate.getDay();
        if (firstDay > 0) {
            calendarHtml += '<tr>' + '<td></td>'.repeat(firstDay);
        }

        while (currentDate.getMonth() === month) {
            if (currentDate.getDay() === 0) calendarHtml += '<tr>';

            calendarHtml += `<td>${currentDate.getDate()}<br>`;
            
            if (currentDate >= today && currentDate <= futureLimit) {
                const inputId = `day-${year}-${padToTwoDigits(month + 1)}-${padToTwoDigits(currentDate.getDate())}`;
                calendarHtml += `<input type="number" max="1" id="${inputId}" min="0" max="1" step="0.1" value="0">`;
                calendarHtml += `<span class="print-value" id="print-${inputId}"></span>`;
            }
            
            calendarHtml += `</td>`;

            if (currentDate.getDay() === 6) calendarHtml += '</tr>';
            currentDate.setDate(currentDate.getDate() + 1);
        }

        if (currentDate.getDay() > 0) {
            calendarHtml += '<td></td>'.repeat(7 - currentDate.getDay()) + '</tr>';
        }

        calendarHtml += '</table>';
        calendarHtml += `<div class="month-total" data-month="${year}-${padToTwoDigits(month + 1)}">Month's Parenting Days: <span class="month-total-value">0.000</span></div>`;
        calendarHtml += '</div>';

        if (i % 3 === 2 || i === 24) {
            calendarHtml += '</div>'; // Close the row
        }
    }

    document.getElementById('calendar').innerHTML = calendarHtml;

// Add event listeners to all inputs
document.querySelectorAll('#calendar input[type="number"]').forEach(input => {
    input.addEventListener('change', function() {
        updateTotalDays();
        updateCellBackground(this);
        updateDisplayValues(this);
        updateAllMonthlyTotals();
    });
});
document.querySelectorAll('#calendar input[type="number"]').forEach(input => {
    updateCellBackground(input);
    updateDisplayValues(input);
});
updateAllMonthlyTotals();
}

function updateDisplayValues(input) {
    const value = parseFloat(input.value) || 0;
    const printSpan = document.getElementById('print-' + input.id);
    
    if (value === 0) {
        input.value = '';
        if (printSpan) printSpan.textContent = '';
    } else {
        input.value = value.toFixed(1);
        if (printSpan) printSpan.textContent = value.toFixed(3);
    }
}

function refreshAllDisplayValues() {
    document.querySelectorAll('#calendar input[type="number"]').forEach(input => {
        updateDisplayValues(input);
        updateCellBackground(input);
    });
    updateAllMonthlyTotals();
}

function updateAllMonthlyTotals() {
    document.querySelectorAll('.month-total').forEach(totalDiv => {
        const monthKey = totalDiv.getAttribute('data-month');
        const [year, month] = monthKey.split('-');
        let total = 0;
        
        document.querySelectorAll(`#calendar input[type="number"]`).forEach(input => {
            if (input.id.startsWith(`day-${year}-${month}-`)) {
                total += parseFloat(input.value) || 0;
            }
        });
        
        const valueSpan = totalDiv.querySelector('.month-total-value');
        if (valueSpan) {
            valueSpan.textContent = total.toFixed(3);
        }
    });
}

function isfirstorthird(date) {
    var day = date.getDay(); // Day of the week (0-6, 0 is Sunday)
    var dateOfMonth = date.getDate(); // Day of the month (1-31)
    
    // Find the first occurrence of this day in the month
    var firstOccurrence = new Date(date.getFullYear(), date.getMonth(), 1);
    while (firstOccurrence.getDay() != day) {
        firstOccurrence.setDate(firstOccurrence.getDate() + 1);
    }

    // Calculate the dates of the first and third occurrences
    var firstOccurrenceDate = firstOccurrence.getDate();
    var thirdOccurrenceDate = firstOccurrenceDate + 14; // 14 days after the first occurrence

    return dateOfMonth == firstOccurrenceDate || dateOfMonth == thirdOccurrenceDate;
}

function isSecondOrFourthOccurance(date) {
}

function isOddWeek(date) {
    const weekNumber = getWeekNumber(date);
    return weekNumber % 2 !== 0 && (date.getDay() === 5 || date.getDay() === 6 || date.getDay() === 0);
}

function isEvenWeek(date) {
    const weekNumber = getWeekNumber(date);
    return weekNumber % 2 === 0 && (date.getDay() === 5 || date.getDay() === 6 || date.getDay() === 0);
}

function isFirstOrThirdWeek(date, beginDayIndex) {
    const firstDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1);
    let firstOccurrence = firstDayOfMonth;

    while (firstOccurrence.getDay() !== beginDayIndex) {
        firstOccurrence.setDate(firstOccurrence.getDate() + 1);
    }

    let weekCount = 0;
    let currentWeekStart = new Date(firstOccurrence);

    while (currentWeekStart.getMonth() === date.getMonth()) {
        weekCount++;
        if (currentWeekStart <= date && date < new Date(currentWeekStart.getTime() + 7 * 24 * 60 * 60 * 1000)) {
            return weekCount === 1 || weekCount === 3;
        }
        currentWeekStart.setDate(currentWeekStart.getDate() + 7);
    }
    return false;
}

function isSecondOrFourthWeek(date, beginDayIndex) {
    const firstDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1);
    let firstOccurrence = firstDayOfMonth;

    while (firstOccurrence.getDay() !== beginDayIndex) {
        firstOccurrence.setDate(firstOccurrence.getDate() + 1);
    }

    let weekCount = 0;
    let currentWeekStart = new Date(firstOccurrence);

    while (currentWeekStart.getMonth() === date.getMonth()) {
        weekCount++;
        if (currentWeekStart <= date && date < new Date(currentWeekStart.getTime() + 7 * 24 * 60 * 60 * 1000)) {
            return weekCount === 2 || weekCount === 4;
        }
        currentWeekStart.setDate(currentWeekStart.getDate() + 7);
    }
    return false;
}
function toggleVisibility(radioGroupName, divId) {
    const radioButtons = document.querySelectorAll(`input[name="${radioGroupName}"]`);
    const div = document.getElementById(divId);

    if (radioButtons.length && div) {
        radioButtons.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'Omit') {
                    div.style.display = 'none';
                } else {
                    div.style.display = 'block';
                }
            });
        });

        // Initial state
        const checkedRadio = document.querySelector(`input[name="${radioGroupName}"]:checked`);
        if (checkedRadio && checkedRadio.value === 'Omit') {
            div.style.display = 'none';
        }
    }
}
function updateCellBackground(input) {
    const cell = input.closest('td');
    const value = parseFloat(input.value);
    
    if (value === 1) {
        cell.style.backgroundColor = 'darkgrey';
    } else if (value > 0 && value < 1) {
        cell.style.backgroundColor = 'lightgrey';
    } else {
        cell.style.backgroundColor = ''; // Reset to default
    }
}
</script>


{% endblock %}
